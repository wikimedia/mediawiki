<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title></title> 	 	 	
 	<script type="text/javascript">
	/*
	  XDCommsChild - Cross Domain Communication, Child Object.
	
	   Create this in the child window with the address of the xdomaincomms.html file on the same domain as the parent window
	*/
	var XDCommsChild = function(xdomaincommsAddress) {
	    this.xdomaincommsAddress = xdomaincommsAddress;
	
	    this.isIe = isInternetExplorer();
	
	    if (isIe) {
	        // need hidden frame for communication. IE8 is supposed to support postMessage, but I can't get it to work properly
	        document.writeln("")
	    }
	
	    this.postBack = function(data) {
	        if (isIe) {
	            // this method tested against IE6,7 & 8
	            window.open(this.xdomaincommsAddress + '#data=' + data, 'xdcomms'); // MUST use window.open. frame.src or frame.location both fail
	        } else {
	            // for everything else - tested against Firefox 3, Chrome, Safari
	            window.opener.postMessage(data, '*'); // should really restrict the domain data can come from here
	        }
	    }
	
	    this.postBackAndCloseWindow = function(data){
	        this.postBack(data);
	        setTimeout("window.close()", 200); // need to use a timeout to make sure the javascript in the frame has executed if we are using that communication model
	    }
	}
 	</script> 
</head>
<body>
<h3> This file should be inclued by external sites that want to be proxied: </h3>
</body>
</html>

