= MediaWiki release notes =

Security reminder: MediaWiki does not require PHP's register_globals
setting since version 1.2.0. If you have it on, turn it *off* if you can.

== MediaWiki 1.17 ==

THIS IS NOT A RELEASE YET

MediaWiki is now using a "continuous integration" development model with
quarterly snapshot releases. The latest development code is always kept
"ready to run", and in fact runs our own sites on Wikipedia.

Release branches will continue to receive security updates for about a year
from first release, but nonessential bugfixes and feature developments
will be made on the development trunk and appear in the next quarterly release.

Those wishing to use the latest code instead of a branch release can obtain
it from source control: http://www.mediawiki.org/wiki/Download_from_SVN

=== Configuration changes in 1.17 ===
* DatabaseFunctions.php that was needed for compatibility with pre-1.3
  extensions has been removed.
* $wgLogAutocreatedAccounts controls whether autocreation of accounts is logged
  to new users log.
* $wgAllowImageTag can be set to true to whitelist the <img> tag in wikitext.

=== New features in 1.17 ===
* (bug 10183) Users can now add personal styles and scripts to all skins via
  User:<name>/common.css and /common.js (if user css/js is enabled)
* (bug 22748) Add anchors on Special:ListGroupRights
* (bug 21981) Add parameter 'showfilename' to <gallery> to automatically apply
  the names of the individual files within the gallery
* (bug 12797) Add $wgGalleryOptions for adjusting of default gallery display
  options
* $wgAllowUserCssPrefs option allows disabling CSS-based preferences; which can
  improve page loading speed.
* Future-proof redirection to fragments in Gecko, so things work a little nicer
  if they fix <https://bugzilla.mozilla.org/show_bug.cgi?id=516293>.
* Support git:// and mms:// protocols by default for external links
* (bug 15810) Blocked admins can no longer unblock themselves without the
  'unblockself' permission (which they have by default)
* (bug 18499) Added "enhanced" URL parameter to switch between old and enhanced
  changes list
* (bug 22925) "sp-contributions-blocked-notice-anon" message now displayed when
  viewing contributions of a blocked IP address
* (bug 22474) {{urlencode:}} now takes an optional second paramter for type of
  escaping.
* Special:Listfiles now supports a username parameter
* Special:Random carries over query string parameters
* (bug 23206) Add Special::Search hook for detecting successful "Go"
* When visiting a "red link" of a deleted file, a deletion and move log excerpt
  is provided on the Upload form.
* (bug 22647) Add category details in search results.
* (bug 23276) Add hook to Special:NewPages to modify query
* Add accesskey 's' and tooltip to 'Save' button at Special:Preferences
* Add accesskey 'b' and tooltip to the summary field of edit mode
* (bug 20186) Allow filtering Special:Contributions for RevisionDeleted edits
* (bug 22858) $wgLocalStylePath is by default set to the same value as
  $wgStylePath but should never point to a different domain than the site is
  on, allowing skins to use .htc files which are not cross-domain friendly.
* ajaxwatch now uses the API and JQuery, and can be used to animate arbitrary 
  watch links, not just to watch the page the link is on.
* (bug 20193) Added $wgVectorShowVariantName global configuration variable
  which causes Vector to render the variants drop-down menu with a label
  showing the current variant name. This is off by default, pending further
  research into its user experience implications.

=== Bug fixes in 1.17 ===
* (bug 17560) Half-broken deletion moved image files to deletion archive
  without updating database
* (bug 22666) Submitting user block form with an invalid user name no longer
  throws an error
* (bugs 22665 and 22667) User '0' can now be unblocked and have its block
  settings changed
* (bug 22606) The body of e-mail address confirmation message is now different
  when the address changed
* (bug 22664) Special:Userrights now accepts '0' as a valid user name
* (bug 5210) preload parser now parses <noinclude>, <includeonly> and redirects
* (bug 22709) IIS7 mishandles redirects generated by OutputPage::output() when
  the URL contains a colon.
* (bug 22353) Categorised recent changes now works again
* (bug 22747) "Reveal my e-mail address in notification e-mails" preference is
  now only displayed when relevant
* (bug 22772) {{#special:}} parser function now works with subpages
* (bug 18664) Relative URIs in interwiki links cause failed redirects
* (bug 19270) Relative URIs in interwiki links break interwiki transclusion
* (bug 22903) Revdelete log entries now show in the user preferred language.
* (bug 22905) Correctly handle <abbr> followed by ISBN
* (bug 22940) Namespace aliases pointing to main namespace don't work
* (bug 15810) Blocked admins can no longer block/unblock other users
* (bug 22876) Avoid possible PHP Notice if $wgDefaultUserOptions is not
  correctly set
* (bug 14952) Page titles are renormalized after html entities are removed so
  that links with non-NFC character references work correctly.
* (bug 22991) wgUserGroups JavaScript variable now reports * group for
  anonymous users instead of null.
* (bug 22627) Remove PHP notice when deleting a page only hidden users edited.
* (bug 21520) Anonymous previews now also gives a warning about not being
  logged in (anonpreviewwarning).
* (bug 22935) image/x-ms-bmp mime type added for BMP files
* (bug 23024) Special:ListFiles now escapes file names correctly
* (bug 22867) "View source" tab is now only displayed if there's source text
* (bug 19393) Feeds now format dates in user language rather than content
  language
* (bug 22852) "Served in" comment is now the time used to cache a single page
  when using rebuildFileCache.php
* (bug 22496) Viewing diff of a redirect page without specifying "oldid"
  parameter no longer makes the page displayed as being the redirect target
* (bug 22918) Feed cache keys now use $wgRenderHashAppend
* (bug 21916) Last-Modified header is now correct when outputting cached feed
* (bug 20049) Fixed PHP notice in search highlighter that occurs in some cases
* (bug 23017) Special:Disambiguations now list pages in content namespaces
  rather than only main namespace
* (bug 23063) $wgMaxAnimatedGifArea is checked against the total size of all
  frames, and $wgMaxImageArea against the size of the first frame, rather than
  the other way around.  Both now default to 12.5 megapixels.  Also, images
  exceeding $wgMaxImageArea can still be embedded at original size
* (bug 23078) "All public logs" option on Special:Log is now always the first
  item
* (bug 16817) Group names in user rights log are now singular and in lowercase
* Special:Preferences no longer crashes if the wiki default date formatting
  style is not valid for the user's interface language
* (bug 23167) Check the watch checkbox by default if the watchcreations
  preference is set
* Maintenance script cleanupTitles is now able to fix titles stored
in a negative namespace (which is invalid).
* (bug 19858) Removed obsolete <big> in interface messages.
* (bug 21456) "Bad title" error when showing non-local interwiki pages no longer
  displays incorrect tabs
* (bug 23190) Improved math representation for text browsers.
* (bug 22015) Improved upload-by-url error handling and error display
* (bug 17941) $wgMaxUploadSize is now honored by all upload sources
* (bug 23080) New usernames now limited to 235 bytes so that custom skin files
  work.
* (bug 23075) Correct MediaTransformError default width in gallery.
* (bug 16487) The Anonymous user account used on Postgres is no longer
  displayed on Special:Listusers.
* (bug 23313) Move watchlisthidepatrolled above token in watchlist preferences
  to enhance preference grouping.
* (bug 23298) Interwiki links with prefix only in log summaries now link to the
  correct link
* (bug 23284) Times are now rounded correctly
* (bug 23375) Added ogv, oga, spx as extensions for ogg files 
* (bug 18408) All required permissions for uploading (upload, edit, create) 
  are now checked when loading Special:Upload. Toolbar link for Special:Upload
  is no longer shown if the user does not have the required permissions.
* (Bug 23397) texvc in html mode renders \sim as &tilde; not &sim;

=== API changes in 1.17 ===
* (bug 22738) Allow filtering by action type on query=logevent
* (bug 22764) uselang parameter for action=parse
* (bug 22944) API: watchlist options are inconsistent
* (bug 22339) "Go" result should be available through the API
* (bug 22868) don't list infinite block expiry date as "now" in API logevents
* (bug 22290) prop=revisions now outputs "comment" field even when comment
  is empty, for consistency with list=recentchanges

=== Languages updated in 1.17 ===

MediaWiki supports over 330 languages. Many localisations are updated
regularly. Below only new and removed languages are listed, as well as
changes to languages because of MediaZilla reports.

* Latgalian (ltg) (new)
* Rusyn (rue) (new)

* (bug 23156) Commafy and search normalization updated for Belarusian
  (Taraškievica)
* (bug 23283) Native name for Old English -> Ænglisc
* (bug 23364) Native name for Azerbaijani -> Azərbaycanca

== Compatibility ==

MediaWiki 1.17 requires PHP 5.1 (5.2 recommended). PHP 4 is no longer
supported.

MySQL 3.23.x is no longer supported; some older hosts may need to upgrade.
At this time we still recommend 4.0, but 4.1/5.0 will work fine in most cases.


== Upgrading ==

1.17 has several database changes since 1.16, and will not work without schema
updates.

If upgrading from before 1.11, and you are using a wiki as a commons reposito-
ry, make sure that it is updated as well. Otherwise, errors may arise due to
database schema changes.

If upgrading from before 1.7, you may want to run refreshLinks.php to ensure
new database fields are filled with data.

If you are upgrading from MediaWiki 1.4.x or earlier, some major database
changes are made, and there is a slightly higher chance that things could
break. Don't forget to always back up your database before upgrading!

See the file UPGRADE for more detailed upgrade instructions.


=== Caveats ===

Some output, particularly involving user-supplied inline HTML, may not
produce 100% valid or well-formed XHTML output. Testers are welcome to
set $wgMimeType = "application/xhtml+xml"; to test for remaining problem
cases, but this is not recommended on live sites. (This must be set for
MathML to display properly in Mozilla.)

For notes on 1.16.x and older releases, see HISTORY.


=== Online documentation ===

Documentation for both end-users and site administrators is currently being
built up on MediaWiki.org, and is covered under the GNU Free Documentation
License (except for pages that explicitly state that their contents are in
the public domain) :

  http://www.mediawiki.org/wiki/Documentation


=== Mailing list ===

A MediaWiki-l mailing list has been set up distinct from the Wikipedia
wikitech-l list:

  http://lists.wikimedia.org/mailman/listinfo/mediawiki-l

A low-traffic announcements-only list is also available:

  http://lists.wikimedia.org/mailman/listinfo/mediawiki-announce

It's highly recommended that you sign up for one of these lists if you're
going to run a public MediaWiki, so you can be notified of security fixes.


=== IRC help ===

There's usually someone online in #mediawiki on irc.freenode.net
