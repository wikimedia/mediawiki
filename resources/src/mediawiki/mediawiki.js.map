{"version":3,"sources":["/webpack/bootstrap 2dc2742e836bbea0ed51","/./build/mediawiki/mediawiki.js","/./build/mediawiki/format.js","/./build/mediawiki/log.js","/./build/mediawiki/now.js","/./build/mediawiki/track.js","/./build/mediawiki/StringSet.js","/./build/mediawiki/html.js","/./build/mediawiki/loader.js","/./build/mediawiki/Map.js","/./build/mediawiki/Message.js","/./build/mediawiki/errorLogger.js","/./build/mediawiki/fnv132.js","/./build/mediawiki/hook.js","/./build/mediawiki/requestIdleCallbackInternal.js","/./build/mediawiki/index.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,SAAS;AACrB,aAAa,OAAO;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,SAAS;AACrB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA,YAAY,SAAS;AACrB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA,eAAe;AACf;AACA;;AAEA;AACA;AACA;AACA,eAAe;AACf;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,SAAS;AACrB,aAAa;AACb;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,SAAS;AACrB,aAAa;AACb;AACA;AACA;AACA,EAAE;;AAEF;AACA,iCAAiC,aAAa;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,kCAAkC,WAAW;AAC7C;AACA,yBAAyB,uBAAuB;AAChD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,EAAE;;AAEF;AACA,YAAY;;AAEZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,mBAAmB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC7QA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;;;;;;ACRA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,UAAU;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,gBAAgB;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,MAAM;AAClB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;;AAEA;AACA,CAAC;;AAED;;;;;;;AC9FA;AACA;AACA;AACA;AACA,eAAe,8BAA8B,EAAE;AAC/C,eAAe,oBAAoB;AACnC,CAAC;;;;;;;ACND;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA,SAAS,0BAA0B;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,mBAAmB,6CAA6C;AAChE;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;ACfD;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA,kBAAkB;AAClB;AACA,gBAAgB;AAChB;AACA,gBAAgB;AAChB;AACA,iBAAiB;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,KAAK,OAAO,MAAM;AAC1C;AACA,aAAa,OAAO;AACpB,cAAc,OAAO;AACrB;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,sCAAsC;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;ACxHD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,YAAY;AACxB;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,MAAM;AAChC,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;;AAEd;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,SAAS;AACzB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,KAAK;AACjB;AACA,aAAa,YAAY;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA,YAAY,SAAS;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAY,MAAM;AAClB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA,cAAc,oBAAoB;AAClC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA,cAAc,oBAAoB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;AAEA;AACA,cAAc,iBAAiB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,yCAAyC,wDAAwD;AACjG;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA,YAAY,MAAM;AAClB;AACA;AACA;AACA,YAAY,UAAU;AACtB;AACA,aAAa,MAAM;AACnB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,iBAAiB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,SAAS;AACrB,aAAa,MAAM;AACnB,aAAa,MAAM;AACnB;AACA;AACA;AACA,cAAc,oBAAoB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,IAAI;AACJ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA,MAAM;AACN;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,4CAA4C,yDAAyD;AACrG;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA,GAAG;;AAEH;AACA,qBAAqB;AACrB,qBAAqB;AACrB,QAAQ;AACR,QAAQ,SAAS,qBAAqB;AACtC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,uBAAuB;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA,wBAAwB;AACxB;AACA,OAAO;AACP,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,SAAS,SAAS,qBAAqB;AACvC;AACA;AACA,kBAAkB,iBAAiB;AACnC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,gBAAgB;AAC5B,YAAY,SAAS;AACrB,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,IAAI;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,cAAc;AACd;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,gBAAgB;AAChC;AACA;AACA;AACA;;AAEA;AACA,uCAAuC;AACvC;AACA;AACA;AACA,YAAY,OAAO;AACnB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA;AACA;AACA,IAAI,2CAA2C;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,oBAAoB;AAClC;AACA;AACA,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAc,kBAAkB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;;AAE9B,mBAAmB,KAAK;;AAExB,gBAAgB,oBAAoB;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,iCAAiC;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,SAAS;AACrB;AACA,YAAY,SAAS;AACrB,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C,IAAI;AACJ;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,aAAa,YAAY;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,OAAO;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,eAAe,kBAAkB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,yCAAyC,uCAAuC;AAChF;AACA;AACA;AACA,MAAM;AACN;AACA,KAAK;AACL;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,cAAc;AAC3B,aAAa,OAAO;AACpB,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,aAAa;AAC1B;AACA,aAAa,cAAc;AAC3B;AACA,aAAa,sBAAsB;AACnC;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA,aAAa,sBAAsB;AACnC;AACA,aAAa,OAAO;AACpB;AACA,UAAU;AACV,UAAU,SAAS,qBAAqB;AACxC;AACA;AACA;AACA,UAAU;AACV,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,aAAa,aAAa;AAC1B;AACA,aAAa,SAAS;AACtB,aAAa,SAAS;AACtB,cAAc,eAAe;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA,aAAa,aAAa;AAC1B;AACA,aAAa,OAAO;AACpB,+BAA+B;AAC/B,wBAAwB;AACxB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,aAAa,cAAc;AAC3B,aAAa,OAAO;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,aAAa,OAAO;AACpB,cAAc,YAAY;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,aAAa,OAAO;AACpB,cAAc,YAAY;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB,cAAc,MAAM;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,YAAY;;AAEZ;AACA,WAAW,4CAA4C;;AAEvD;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA,YAAY;AACZ,IAAI;;AAEJ;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,yCAAyC,kDAAkD;AAC3F;;AAEA;AACA,4BAA4B;AAC5B;AACA,KAAK;AACL;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA,cAAc,OAAO;AACrB,eAAe,eAAe;AAC9B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,eAAe,QAAQ;AACvB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,uBAAuB;AAC9D;AACA,KAAK;AACL,yCAAyC,kDAAkD;AAC3F;AACA;;AAEA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA,eAAe,QAAQ;AACvB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,0CAA0C,oDAAoD;AAC9F;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,CAAC;;AAED;;;;;;;AChuDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,aAAa;AACzB,YAAY,MAAM;AAClB,aAAa,mBAAmB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,YAAY,cAAc;AAC1B,YAAY,MAAM;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,YAAY,MAAM;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC7JA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,UAAU,KAAK;AAC3C;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA,cAAc,uBAAuB;AACrC;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA,8BAA8B;AAC9B,eAAe,SAAS,IAAI,SAAS,IAAI,MAAM;AAC/C;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;AC1MA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA,YAAY,YAAY;AACxB;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,cAAc;;AAEhE;AACA;AACA;AACA,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,OAAO;AACpB,aAAa,YAAY;AACzB,cAAc,QAAQ;AACtB;AACA;AACA;AACA,8BAA8B;AAC9B,kFAAkF;AAClF;AACA;AACA;AACA;;AAEA;;;;;;;AC1DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA,aAAa,gBAAgB;AAC7B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;AC/BA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,YAAY;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,YAAY;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAc,SAAS;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;AChDD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,EAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB,YAAY,MAAM;AAClB,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH,EAAE;;AAEF;AACA;AACA;AACA;AACA,CAAC","file":"/mediawiki/mediawiki.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2dc2742e836bbea0ed51","var mw,\n\tlog = require( './log' ),\n\terrorLogger = require( './errorLogger' ),\n\tslice = Array.prototype.slice,\n\thtml = require( './html' ),\n\ttrack = require( './track' ),\n\tMap = require( './Map' ),\n\tnow = require( './now' ),\n\thook = require( './hook' ),\n\trequestIdleCallbackInternal = require( './requestIdleCallbackInternal' ),\n\tformat = require( './format' ),\n\tMessage = require( './Message' );\n\n/**\n * @class mw\n */\nmw = {\n\terrorLogger: errorLogger,\n\t/**\n\t * Get the current time, measured in milliseconds since January 1, 1970 (UTC).\n\t *\n\t * On browsers that implement the Navigation Timing API, this function will produce floating-point\n\t * values with microsecond precision that are guaranteed to be monotonic. On all other browsers,\n\t * it will fall back to using `Date`.\n\t *\n\t * @return {number} Current time\n\t */\n\tnow: now,\n\n\t/**\n\t * Format a string. Replace $1, $2 ... $N with positional arguments.\n\t *\n\t * Used by Message#parser().\n\t *\n\t * @since 1.25\n\t * @param {string} formatString Format string\n\t * @param {...Mixed} parameters Values for $N replacements\n\t * @return {string} Formatted string\n\t */\n\tformat: format,\n\n\t/**\n\t * Track an analytic event.\n\t *\n\t * This method provides a generic means for MediaWiki JavaScript code to capture state\n\t * information for analysis. Each logged event specifies a string topic name that describes\n\t * the kind of event that it is. Topic names consist of dot-separated path components,\n\t * arranged from most general to most specific. Each path component should have a clear and\n\t * well-defined purpose.\n\t *\n\t * Data handlers are registered via `mw.trackSubscribe`, and receive the full set of\n\t * events that match their subcription, including those that fired before the handler was\n\t * bound.\n\t *\n\t * @param {string} topic Topic name\n\t * @param {Object} [data] Data describing the event, encoded as an object\n\t */\n\ttrack: track.track,\n\n\t/**\n\t * Register a handler for subset of analytic events, specified by topic.\n\t *\n\t * Handlers will be called once for each tracked event, including any events that fired before the\n\t * handler was registered; 'this' is set to a plain object with a 'timeStamp' property indicating\n\t * the exact time at which the event fired, a string 'topic' property naming the event, and a\n\t * 'data' property which is an object of event-specific data. The event topic and event data are\n\t * also passed to the callback as the first and second arguments, respectively.\n\t *\n\t * @param {string} topic Handle events whose name starts with this string prefix\n\t * @param {Function} callback Handler to call for each matching tracked event\n\t * @param {string} callback.topic\n\t * @param {Object} [callback.data]\n\t */\n\ttrackSubscribe: track.trackSubscribe,\n\n\t/**\n\t * Stop handling events for a particular handler\n\t *\n\t * @param {Function} callback\n\t */\n\ttrackUnsubscribe: track.trackUnsubscribe,\n\n\t// Expose Map constructor\n\tMap: Map,\n\n\t// Expose Message constructor\n\tMessage: Message,\n\n\t/**\n\t * Map of configuration values.\n\t *\n\t * Check out [the complete list of configuration values](https://www.mediawiki.org/wiki/Manual:Interface/JavaScript#mw.config)\n\t * on mediawiki.org.\n\t *\n\t * If `$wgLegacyJavaScriptGlobals` is true, this Map will add its values to the\n\t * global `window` object.\n\t *\n\t * @property {mw.Map} config\n\t */\n\tconfig: new Map(),\n\n\t/**\n\t * Empty object for third-party libraries, for cases where you don't\n\t * want to add a new global, or the global is bad and needs containment\n\t * or wrapping.\n\t *\n\t * @property\n\t */\n\tlibs: {},\n\n\t/**\n\t * Access container for deprecated functionality that can be moved from\n\t * from their legacy location and attached to this object (e.g. a global\n\t * function that is deprecated and as stop-gap can be exposed through here).\n\t *\n\t * This was reserved for future use but never ended up being used.\n\t *\n\t * @deprecated since 1.22 Let deprecated identifiers keep their original name\n\t *  and use mw.log#deprecate to create an access container for tracking.\n\t * @property\n\t */\n\tlegacy: {},\n\n\t/**\n\t * Store for messages.\n\t *\n\t * @property {mw.Map}\n\t */\n\tmessages: new Map(),\n\n\t/**\n\t * Store for templates associated with a module.\n\t *\n\t * @property {mw.Map}\n\t */\n\ttemplates: new Map(),\n\n\t/**\n\t * Get a message object.\n\t *\n\t * Shortcut for `new mw.Message( mw.messages, key, parameters )`.\n\t *\n\t * @see mw.Message\n\t * @param {string} key Key of message to get\n\t * @param {...Mixed} parameters Values for $N replacements\n\t * @return {mw.Message}\n\t */\n\tmessage: function ( key ) {\n\t\tvar parameters = slice.call( arguments, 1 );\n\t\treturn new Message( mw.messages, key, parameters );\n\t},\n\n\t/**\n\t * Get a message string using the (default) 'text' format.\n\t *\n\t * Shortcut for `mw.message( key, parameters... ).text()`.\n\t *\n\t * @see mw.Message\n\t * @param {string} key Key of message to get\n\t * @param {...Mixed} parameters Values for $N replacements\n\t * @return {string}\n\t */\n\tmsg: function () {\n\t\treturn mw.message.apply( mw.message, arguments ).toString();\n\t},\n\n\t/**\n\t * No-op dummy placeholder for {@link mw.log} in debug mode.\n\t *\n\t * @method\n\t */\n\tlog: log,\n\n\t/**\n\t * Client for ResourceLoader server end point.\n\t *\n\t * This client is in charge of maintaining the module registry and state\n\t * machine, initiating network (batch) requests for loading modules, as\n\t * well as dependency resolution and execution of source code.\n\t *\n\t * For more information, refer to\n\t * <https://www.mediawiki.org/wiki/ResourceLoader/Features>\n\t *\n\t * @class mw.loader\n\t * @singleton\n\t */\n\t// Will be set later\n\tloader: null,\n\n\t/**\n\t * HTML construction helper functions\n\t *\n\t *     @example\n\t *\n\t *     var Html, output;\n\t *\n\t *     Html = mw.html;\n\t *     output = Html.element( 'div', {}, new Html.Raw(\n\t *         Html.element( 'img', { src: '<' } )\n\t *     ) );\n\t *     mw.log( output ); // <div><img src=\"&lt;\"/></div>\n\t *\n\t * @class mw.html\n\t * @singleton\n\t */\n\thtml: html,\n\n\t// Skeleton user object, extended by the 'mediawiki.user' module.\n\t/**\n\t * @class mw.user\n\t * @singleton\n\t */\n\tuser: {\n\t\t/**\n\t\t * @property {mw.Map}\n\t\t */\n\t\toptions: new Map(),\n\t\t/**\n\t\t * @property {mw.Map}\n\t\t */\n\t\ttokens: new Map()\n\t},\n\n\t// OOUI widgets specific to MediaWiki\n\twidgets: {},\n\n\t/**\n\t * Registry and firing of events.\n\t *\n\t * MediaWiki has various interface components that are extended, enhanced\n\t * or manipulated in some other way by extensions, gadgets and even\n\t * in core itself.\n\t *\n\t * This framework helps streamlining the timing of when these other\n\t * code paths fire their plugins (instead of using document-ready,\n\t * which can and should be limited to firing only once).\n\t *\n\t * Features like navigating to other wiki pages, previewing an edit\n\t * and editing itself – without a refresh – can then retrigger these\n\t * hooks accordingly to ensure everything still works as expected.\n\t *\n\t * Example usage:\n\t *\n\t *     mw.hook( 'wikipage.content' ).add( fn ).remove( fn );\n\t *     mw.hook( 'wikipage.content' ).fire( $content );\n\t *\n\t * Handlers can be added and fired for arbitrary event names at any time. The same\n\t * event can be fired multiple times. The last run of an event is memorized\n\t * (similar to `$(document).ready` and `$.Deferred().done`).\n\t * This means if an event is fired, and a handler added afterwards, the added\n\t * function will be fired right away with the last given event data.\n\t *\n\t * Like Deferreds and Promises, the mw.hook object is both detachable and chainable.\n\t * Thus allowing flexible use and optimal maintainability and authority control.\n\t * You can pass around the `add` and/or `fire` method to another piece of code\n\t * without it having to know the event name (or `mw.hook` for that matter).\n\t *\n\t *     var h = mw.hook( 'bar.ready' );\n\t *     new mw.Foo( .. ).fetch( { callback: h.fire } );\n\t *\n\t * Note: Events are documented with an underscore instead of a dot in the event\n\t * name due to jsduck not supporting dots in that position.\n\t *\n\t * @class mw.hook\n\t */\n\thook: hook,\n\trequestIdleCallback: requestIdleCallbackInternal\n};\n\nmodule.exports = mw;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/mediawiki/mediawiki.js\n// module id = 0\n// module chunks = 0","var slice = Array.prototype.slice;\n\nmodule.exports = function ( formatString ) {\n\tvar parameters = slice.call( arguments, 1 );\n\treturn formatString.replace( /\\$(\\d+)/g, function ( str, match ) {\n\t\tvar index = parseInt( match, 10 ) - 1;\n\t\treturn parameters[ index ] !== undefined ? parameters[ index ] : '$' + match;\n\t} );\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/mediawiki/format.js\n// module id = 1\n// module chunks = 0","/* eslint-disable no-console */\nvar log,\n\tStringSet = require( './StringSet' ),\n\ttrack = require( './track' ).track;\n\nlog = ( function () {\n\t// Also update the restoration of methods in mediawiki.log.js\n\t// when adding or removing methods here.\n\tvar log = function () {},\n\t\tconsole = window.console;\n\n\t/**\n\t * @class mw.log\n\t * @singleton\n\t */\n\n\t/**\n\t * Write a message to the console's warning channel.\n\t * Actions not supported by the browser console are silently ignored.\n\t *\n\t * @param {...string} msg Messages to output to console\n\t */\n\tlog.warn = console && console.warn && Function.prototype.bind ?\n\t\tFunction.prototype.bind.call( console.warn, console ) :\n\t\t$.noop;\n\n\t/**\n\t * Write a message to the console's error channel.\n\t *\n\t * Most browsers provide a stacktrace by default if the argument\n\t * is a caught Error object.\n\t *\n\t * @since 1.26\n\t * @param {Error|...string} msg Messages to output to console\n\t */\n\tlog.error = console && console.error && Function.prototype.bind ?\n\t\tFunction.prototype.bind.call( console.error, console ) :\n\t\t$.noop;\n\n\t/**\n\t * Create a property in a host object that, when accessed, will produce\n\t * a deprecation warning in the console.\n\t *\n\t * @param {Object} obj Host object of deprecated property\n\t * @param {string} key Name of property to create in `obj`\n\t * @param {Mixed} val The value this property should return when accessed\n\t * @param {string} [msg] Optional text to include in the deprecation message\n\t * @param {string} [logName=key] Optional custom name for the feature.\n\t *  This is used instead of `key` in the message and `mw.deprecate` tracking.\n\t */\n\tlog.deprecate = !Object.defineProperty ? function ( obj, key, val ) {\n\t\tobj[ key ] = val;\n\t} : function ( obj, key, val, msg, logName ) {\n\t\tvar logged = new StringSet();\n\t\tlogName = logName || key;\n\t\tmsg = 'Use of \"' + logName + '\" is deprecated.' + ( msg ? ( ' ' + msg ) : '' );\n\t\tfunction uniqueTrace() {\n\t\t\tvar trace = new Error().stack;\n\t\t\tif ( logged.has( trace ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlogged.add( trace );\n\t\t\treturn true;\n\t\t}\n\t\t// Support: Safari 5.0\n\t\t// Throws \"not supported on DOM Objects\" for Node or Element objects (incl. document)\n\t\t// Safari 4.0 doesn't have this method, and it was fixed in Safari 5.1.\n\t\ttry {\n\t\t\tObject.defineProperty( obj, key, {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function () {\n\t\t\t\t\tif ( uniqueTrace() ) {\n\t\t\t\t\t\ttrack( 'mw.deprecate', logName );\n\t\t\t\t\t\tlog.warn( msg );\n\t\t\t\t\t}\n\t\t\t\t\treturn val;\n\t\t\t\t},\n\t\t\t\tset: function ( newVal ) {\n\t\t\t\t\tif ( uniqueTrace() ) {\n\t\t\t\t\t\ttrack( 'mw.deprecate', logName );\n\t\t\t\t\t\tlog.warn( msg );\n\t\t\t\t\t}\n\t\t\t\t\tval = newVal;\n\t\t\t\t}\n\t\t\t} );\n\t\t} catch ( err ) {\n\t\t\tobj[ key ] = val;\n\t\t}\n\t};\n\n\treturn log;\n}() );\n\nmodule.exports = log;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/mediawiki/log.js\n// module id = 2\n// module chunks = 0","module.exports = ( function () {\n\tvar perf = window.performance,\n\t\tnavStart = perf && perf.timing && perf.timing.navigationStart;\n\treturn navStart && typeof perf.now === 'function' ?\n\t\tfunction () { return navStart + perf.now(); } :\n\t\tfunction () { return +new Date(); };\n}() );\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/mediawiki/now.js\n// module id = 3\n// module chunks = 0","var trackCallbacks = $.Callbacks( 'memory' ),\n\tnow = require( './now' ),\n\ttrackHandlers = [],\n\ttrackQueue = [];\n\nfunction trackUnsubscribe( callback ) {\n\ttrackHandlers = $.grep( trackHandlers, function ( fns ) {\n\t\tif ( fns[ 1 ] === callback ) {\n\t\t\ttrackCallbacks.remove( fns[ 0 ] );\n\t\t\t// Ensure the tuple is removed to avoid holding on to closures\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t} );\n}\n\nfunction trackSubscribe( topic, callback ) {\n\tvar seen = 0;\n\tfunction handler( trackQueue ) {\n\t\tvar event;\n\t\tfor ( ; seen < trackQueue.length; seen++ ) {\n\t\t\tevent = trackQueue[ seen ];\n\t\t\tif ( event.topic.indexOf( topic ) === 0 ) {\n\t\t\t\tcallback.call( event, event.topic, event.data );\n\t\t\t}\n\t\t}\n\t}\n\n\ttrackHandlers.push( [ handler, callback ] );\n\n\ttrackCallbacks.add( handler );\n}\n\nfunction track( topic, data ) {\n\ttrackQueue.push( { topic: topic, timeStamp: now(), data: data } );\n\ttrackCallbacks.fire( trackQueue );\n}\n\nmodule.exports = {\n\ttrack: track,\n\ttrackUnsubscribe: trackUnsubscribe,\n\ttrackSubscribe: trackSubscribe\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/mediawiki/track.js\n// module id = 4\n// module chunks = 0","module.exports = window.Set || ( function () {\n\t/**\n\t * @private\n\t * @class\n\t */\n\tfunction StringSet() {\n\t\tthis.set = {};\n\t}\n\tStringSet.prototype.add = function ( value ) {\n\t\tthis.set[ value ] = true;\n\t};\n\tStringSet.prototype.has = function ( value ) {\n\t\treturn this.set.hasOwnProperty( value );\n\t};\n\treturn StringSet;\n}() );\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/mediawiki/StringSet.js\n// module id = 5\n// module chunks = 0","module.exports = ( function () {\n\tfunction escapeCallback( s ) {\n\t\tswitch ( s ) {\n\t\t\tcase '\\'':\n\t\t\t\treturn '&#039;';\n\t\t\tcase '\"':\n\t\t\t\treturn '&quot;';\n\t\t\tcase '<':\n\t\t\t\treturn '&lt;';\n\t\t\tcase '>':\n\t\t\t\treturn '&gt;';\n\t\t\tcase '&':\n\t\t\t\treturn '&amp;';\n\t\t}\n\t}\n\n\treturn {\n\t\t/**\n\t\t * Escape a string for HTML.\n\t\t *\n\t\t * Converts special characters to HTML entities.\n\t\t *\n\t\t *     mw.html.escape( '< > \\' & \"' );\n\t\t *     // Returns &lt; &gt; &#039; &amp; &quot;\n\t\t *\n\t\t * @param {string} s The string to escape\n\t\t * @return {string} HTML\n\t\t */\n\t\tescape: function ( s ) {\n\t\t\treturn s.replace( /['\"<>&]/g, escapeCallback );\n\t\t},\n\n\t\t/**\n\t\t * Create an HTML element string, with safe escaping.\n\t\t *\n\t\t * @param {string} name The tag name.\n\t\t * @param {Object} [attrs] An object with members mapping element names to values\n\t\t * @param {string|mw.html.Raw|mw.html.Cdata|null} [contents=null] The contents of the element.\n\t\t *\n\t\t *  - string: Text to be escaped.\n\t\t *  - null: The element is treated as void with short closing form, e.g. `<br/>`.\n\t\t *  - this.Raw: The raw value is directly included.\n\t\t *  - this.Cdata: The raw value is directly included. An exception is\n\t\t *    thrown if it contains any illegal ETAGO delimiter.\n\t\t *    See <https://www.w3.org/TR/html401/appendix/notes.html#h-B.3.2>.\n\t\t * @return {string} HTML\n\t\t */\n\t\telement: function ( name, attrs, contents ) {\n\t\t\tvar v, attrName, s = '<' + name;\n\n\t\t\tif ( attrs ) {\n\t\t\t\tfor ( attrName in attrs ) {\n\t\t\t\t\tv = attrs[ attrName ];\n\t\t\t\t\t// Convert name=true, to name=name\n\t\t\t\t\tif ( v === true ) {\n\t\t\t\t\t\tv = attrName;\n\t\t\t\t\t// Skip name=false\n\t\t\t\t\t} else if ( v === false ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\ts += ' ' + attrName + '=\"' + this.escape( String( v ) ) + '\"';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( contents === undefined || contents === null ) {\n\t\t\t\t// Self close tag\n\t\t\t\ts += '/>';\n\t\t\t\treturn s;\n\t\t\t}\n\t\t\t// Regular open tag\n\t\t\ts += '>';\n\t\t\tswitch ( typeof contents ) {\n\t\t\t\tcase 'string':\n\t\t\t\t\t// Escaped\n\t\t\t\t\ts += this.escape( contents );\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'number':\n\t\t\t\tcase 'boolean':\n\t\t\t\t\t// Convert to string\n\t\t\t\t\ts += String( contents );\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tif ( contents instanceof this.Raw ) {\n\t\t\t\t\t\t// Raw HTML inclusion\n\t\t\t\t\t\ts += contents.value;\n\t\t\t\t\t} else if ( contents instanceof this.Cdata ) {\n\t\t\t\t\t\t// CDATA\n\t\t\t\t\t\tif ( /<\\/[a-zA-z]/.test( contents.value ) ) {\n\t\t\t\t\t\t\tthrow new Error( 'mw.html.element: Illegal end tag found in CDATA' );\n\t\t\t\t\t\t}\n\t\t\t\t\t\ts += contents.value;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error( 'mw.html.element: Invalid type of contents' );\n\t\t\t\t\t}\n\t\t\t}\n\t\t\ts += '</' + name + '>';\n\t\t\treturn s;\n\t\t},\n\n\t\t/**\n\t\t * Wrapper object for raw HTML passed to mw.html.element().\n\t\t *\n\t\t * @class mw.html.Raw\n\t\t * @constructor\n\t\t * @param {string} value\n\t\t */\n\t\tRaw: function ( value ) {\n\t\t\tthis.value = value;\n\t\t},\n\n\t\t/**\n\t\t * Wrapper object for CDATA element contents passed to mw.html.element()\n\t\t *\n\t\t * @class mw.html.Cdata\n\t\t * @constructor\n\t\t * @param {string} value\n\t\t */\n\t\tCdata: function ( value ) {\n\t\t\tthis.value = value;\n\t\t}\n\t};\n}() );\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/mediawiki/html.js\n// module id = 6\n// module chunks = 0","/* eslint-disable no-use-before-define */\nvar rlLoader,\n\thasOwn = Object.prototype.hasOwnProperty,\n\tStringSet = require( './StringSet' ),\n\ttrack = require( './track' ).track,\n\tlog = require( './log' ),\n\tformat = require( './format' ),\n\t// For access to config, messages and templates (and track.. why?)\n\tmw = require( './mediawiki' ),\n\trequestIdleCallback = mw.requestIdleCallback,\n\tfnv132 = require( './fnv132' ),\n\tslice = Array.prototype.slice;\n\nrlLoader = ( function () {\n\t/**\n\t * Fired via track on various resource loading errors.\n\t *\n\t * @event resourceloader_exception\n\t * @param {Error|Mixed} e The error that was thrown. Almost always an Error\n\t *   object, but in theory module code could manually throw something else, and that\n\t *   might also end up here.\n\t * @param {string} [module] Name of the module which caused the error. Omitted if the\n\t *   error is not module-related or the module cannot be easily identified due to\n\t *   batched handling.\n\t * @param {string} source Source of the error. Possible values:\n\t *\n\t *   - style: stylesheet error (only affects old IE where a special style loading method\n\t *     is used)\n\t *   - load-callback: exception thrown by user callback\n\t *   - module-execute: exception thrown by module code\n\t *   - store-eval: could not evaluate module code cached in localStorage\n\t *   - store-localstorage-init: localStorage or JSON parse error in rlLoader.store.init\n\t *   - store-localstorage-json: JSON conversion error in rlLoader.store.set\n\t *   - store-localstorage-update: localStorage or JSON conversion error in rlLoader.store.update\n\t */\n\n\t/**\n\t * Fired via track on resource loading error conditions.\n\t *\n\t * @event resourceloader_assert\n\t * @param {string} source Source of the error. Possible values:\n\t *\n\t *   - bug-T59567: failed to cache script due to an Opera function -> string conversion\n\t *     bug; see <https://phabricator.wikimedia.org/T59567> for details\n\t */\n\n\t/**\n\t * Mapping of registered modules.\n\t *\n\t * See #implement and #execute for exact details on support for script, style and messages.\n\t *\n\t * Format:\n\t *\n\t *     {\n\t *         'moduleName': {\n\t *             // From rlLoader.register()\n\t *             'version': '########' (hash)\n\t *             'dependencies': ['required.foo', 'bar.also', ...], (or) function () {}\n\t *             'group': 'somegroup', (or) null\n\t *             'source': 'local', (or) 'anotherwiki'\n\t *             'skip': 'return !!window.Example', (or) null\n\t *             'module': export Object\n\t *\n\t *             // Set from execute() or rlLoader.state()\n\t *             'state': 'registered', 'loaded', 'loading', 'ready', 'error', or 'missing'\n\t *\n\t *             // Optionally added at run-time by rlLoader.implement()\n\t *             'skipped': true\n\t *             'script': closure, array of urls, or string\n\t *             'style': { ... } (see #execute)\n\t *             'messages': { 'key': 'value', ... }\n\t *         }\n\t *     }\n\t *\n\t * State machine:\n\t *\n\t * - `registered`:\n\t *    The module is known to the system but not yet required.\n\t *    Meta data is registered via rlLoader#register. Calls to that method are\n\t *    generated server-side by the startup module.\n\t * - `loading`:\n\t *    The module was required through rlLoader (either directly or as dependency of\n\t *    another module). The client will fetch module contents from the server.\n\t *    The contents are then stashed in the registry via rlLoader#implement.\n\t * - `loaded`:\n\t *    The module has been loaded from the server and stashed via rlLoader#implement.\n\t *    If the module has no more dependencies in-flight, the module will be executed\n\t *    immediately. Otherwise execution is deferred, controlled via #handlePending.\n\t * - `executing`:\n\t *    The module is being executed.\n\t * - `ready`:\n\t *    The module has been successfully executed.\n\t * - `error`:\n\t *    The module (or one of its dependencies) produced an error during execution.\n\t * - `missing`:\n\t *    The module was registered client-side and requested, but the server denied knowledge\n\t *    of the module's existence.\n\t *\n\t * @property\n\t * @private\n\t */\n\tvar registry = {},\n\t\t// Mapping of sources, keyed by source-id, values are strings.\n\t\t//\n\t\t// Format:\n\t\t//\n\t\t//     {\n\t\t//         'sourceId': 'http://example.org/w/load.php'\n\t\t//     }\n\t\t//\n\t\tsources = {},\n\n\t\t// For queueModuleScript()\n\t\thandlingPendingRequests = false,\n\t\tpendingRequests = [],\n\n\t\t// List of modules to be loaded\n\t\tqueue = [],\n\n\t\t/**\n\t\t * List of callback jobs waiting for modules to be ready.\n\t\t *\n\t\t * Jobs are created by #enqueue() and run by #handlePending().\n\t\t *\n\t\t * Typically when a job is created for a module, the job's dependencies contain\n\t\t * both the required module and all its recursive dependencies.\n\t\t *\n\t\t * Format:\n\t\t *\n\t\t *     {\n\t\t *         'dependencies': [ module names ],\n\t\t *         'ready': Function callback\n\t\t *         'error': Function callback\n\t\t *     }\n\t\t *\n\t\t * @property {Object[]} jobs\n\t\t * @private\n\t\t */\n\t\tjobs = [],\n\n\t\t// For getMarker()\n\t\tmarker = null,\n\n\t\t// For addEmbeddedCSS()\n\t\tcssBuffer = '',\n\t\tcssBufferTimer = null,\n\t\tcssCallbacks = $.Callbacks(),\n\t\tisIE9 = document.documentMode === 9,\n\t\trAF = window.requestAnimationFrame || setTimeout;\n\n\tfunction getMarker() {\n\t\tif ( !marker ) {\n\t\t\t// Cache\n\t\t\tmarker = document.querySelector( 'meta[name=\"ResourceLoaderDynamicStyles\"]' );\n\t\t\tif ( !marker ) {\n\t\t\t\tlog( 'Create <meta name=\"ResourceLoaderDynamicStyles\"> dynamically' );\n\t\t\t\tmarker = $( '<meta>' ).attr( 'name', 'ResourceLoaderDynamicStyles' ).appendTo( 'head' )[ 0 ];\n\t\t\t}\n\t\t}\n\t\treturn marker;\n\t}\n\n\t/**\n\t * Create a new style element and add it to the DOM.\n\t *\n\t * @private\n\t * @param {string} text CSS text\n\t * @param {Node} [nextNode] The element where the style tag\n\t *  should be inserted before\n\t * @return {HTMLElement} Reference to the created style element\n\t */\n\tfunction newStyleTag( text, nextNode ) {\n\t\tvar s = document.createElement( 'style' );\n\n\t\ts.appendChild( document.createTextNode( text ) );\n\t\tif ( nextNode && nextNode.parentNode ) {\n\t\t\tnextNode.parentNode.insertBefore( s, nextNode );\n\t\t} else {\n\t\t\tdocument.getElementsByTagName( 'head' )[ 0 ].appendChild( s );\n\t\t}\n\n\t\treturn s;\n\t}\n\n\t/**\n\t * Add a bit of CSS text to the current browser page.\n\t *\n\t * The CSS will be appended to an existing ResourceLoader-created `<style>` tag\n\t * or create a new one based on whether the given `cssText` is safe for extension.\n\t *\n\t * @private\n\t * @param {string} [cssText=cssBuffer] If called without cssText,\n\t *  the internal buffer will be inserted instead.\n\t * @param {Function} [callback]\n\t */\n\tfunction addEmbeddedCSS( cssText, callback ) {\n\t\tvar $style, styleEl;\n\n\t\tfunction fireCallbacks() {\n\t\t\tvar oldCallbacks = cssCallbacks;\n\t\t\t// Reset cssCallbacks variable so it's not polluted by any calls to\n\t\t\t// addEmbeddedCSS() from one of the callbacks (T105973)\n\t\t\tcssCallbacks = $.Callbacks();\n\t\t\toldCallbacks.fire().empty();\n\t\t}\n\n\t\tif ( callback ) {\n\t\t\tcssCallbacks.add( callback );\n\t\t}\n\n\t\t// Yield once before creating the <style> tag. This lets multiple stylesheets\n\t\t// accumulate into one buffer, allowing us to reduce how often new stylesheets\n\t\t// are inserted in the browser. Appending a stylesheet and waiting for the\n\t\t// browser to repaint is fairly expensive. (T47810)\n\t\tif ( cssText ) {\n\t\t\t// Don't extend the buffer if the item needs its own stylesheet.\n\t\t\t// Keywords like `@import` are only valid at the start of a stylesheet (T37562).\n\t\t\tif ( !cssBuffer || cssText.slice( 0, '@import'.length ) !== '@import' ) {\n\t\t\t\t// Linebreak for somewhat distinguishable sections\n\t\t\t\tcssBuffer += '\\n' + cssText;\n\t\t\t\tif ( !cssBufferTimer ) {\n\t\t\t\t\tcssBufferTimer = rAF( function () {\n\t\t\t\t\t\t// Wrap in anonymous function that takes no arguments\n\t\t\t\t\t\t// Support: Firefox < 13\n\t\t\t\t\t\t// Firefox 12 has non-standard behaviour of passing a number\n\t\t\t\t\t\t// as first argument to a setTimeout callback.\n\t\t\t\t\t\t// http://benalman.com/news/2009/07/the-mysterious-firefox-settime/\n\t\t\t\t\t\taddEmbeddedCSS();\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t// This is a scheduled flush for the buffer\n\t\t} else {\n\t\t\tcssBufferTimer = null;\n\t\t\tcssText = cssBuffer;\n\t\t\tcssBuffer = '';\n\t\t}\n\n\t\t// By default, always create a new <style>. Appending text to a <style> tag is\n\t\t// is a performance anti-pattern as it requires CSS to be reparsed (T47810).\n\t\t//\n\t\t// Support: IE 6-9\n\t\t// Try to re-use existing <style> tags due to the IE stylesheet limit (T33676).\n\t\tif ( isIE9 ) {\n\t\t\t$style = $( getMarker() ).prev();\n\t\t\t// Verify that the element before the marker actually is a <style> tag created\n\t\t\t// by rlLoader (not some other style tag, or e.g. a <meta> tag).\n\t\t\tif ( $style.data( 'ResourceLoaderDynamicStyleTag' ) ) {\n\t\t\t\tstyleEl = $style[ 0 ];\n\t\t\t\tstyleEl.appendChild( document.createTextNode( cssText ) );\n\t\t\t\tfireCallbacks();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Else: No existing tag to reuse. Continue below and create the first one.\n\t\t}\n\n\t\t$style = $( newStyleTag( cssText, getMarker() ) );\n\n\t\tif ( isIE9 ) {\n\t\t\t$style.data( 'ResourceLoaderDynamicStyleTag', true );\n\t\t}\n\n\t\tfireCallbacks();\n\t}\n\n\t/**\n\t * @private\n\t * @param {Array} modules List of module names\n\t * @return {string} Hash of concatenated version hashes.\n\t */\n\tfunction getCombinedVersion( modules ) {\n\t\tvar hashes = $.map( modules, function ( module ) {\n\t\t\treturn registry[ module ].version;\n\t\t} );\n\t\treturn fnv132( hashes.join( '' ) );\n\t}\n\n\t/**\n\t * Determine whether all dependencies are in state 'ready', which means we may\n\t * execute the module or job now.\n\t *\n\t * @private\n\t * @param {Array} modules Names of modules to be checked\n\t * @return {boolean} True if all modules are in state 'ready', false otherwise\n\t */\n\tfunction allReady( modules ) {\n\t\tvar i;\n\t\tfor ( i = 0; i < modules.length; i++ ) {\n\t\t\tif ( rlLoader.getState( modules[ i ] ) !== 'ready' ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\t/**\n\t * Determine whether all dependencies are in state 'ready', which means we may\n\t * execute the module or job now.\n\t *\n\t * @private\n\t * @param {Array} modules Names of modules to be checked\n\t * @return {boolean} True if no modules are in state 'error' or 'missing', false otherwise\n\t */\n\tfunction anyFailed( modules ) {\n\t\tvar i, state;\n\t\tfor ( i = 0; i < modules.length; i++ ) {\n\t\t\tstate = rlLoader.getState( modules[ i ] );\n\t\t\tif ( state === 'error' || state === 'missing' ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * A module has entered state 'ready', 'error', or 'missing'. Automatically update\n\t * pending jobs and modules that depend upon this module. If the given module failed,\n\t * propagate the 'error' state up the dependency tree. Otherwise, go ahead and execute\n\t * all jobs/modules now having their dependencies satisfied.\n\t *\n\t * Jobs that depend on a failed module, will have their error callback ran (if any).\n\t *\n\t * @private\n\t * @param {string} module Name of module that entered one of the states 'ready', 'error', or 'missing'.\n\t */\n\tfunction handlePending( module ) {\n\t\tvar j, job, hasErrors, m, stateChange;\n\n\t\tif ( registry[ module ].state === 'error' || registry[ module ].state === 'missing' ) {\n\t\t\t// If the current module failed, mark all dependent modules also as failed.\n\t\t\t// Iterate until steady-state to propagate the error state upwards in the\n\t\t\t// dependency tree.\n\t\t\tdo {\n\t\t\t\tstateChange = false;\n\t\t\t\tfor ( m in registry ) {\n\t\t\t\t\tif ( registry[ m ].state !== 'error' && registry[ m ].state !== 'missing' ) {\n\t\t\t\t\t\tif ( anyFailed( registry[ m ].dependencies ) ) {\n\t\t\t\t\t\t\tregistry[ m ].state = 'error';\n\t\t\t\t\t\t\tstateChange = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} while ( stateChange );\n\t\t}\n\n\t\t// Execute all jobs whose dependencies are either all satisfied or contain at least one failed module.\n\t\tfor ( j = 0; j < jobs.length; j++ ) {\n\t\t\thasErrors = anyFailed( jobs[ j ].dependencies );\n\t\t\tif ( hasErrors || allReady( jobs[ j ].dependencies ) ) {\n\t\t\t\t// All dependencies satisfied, or some have errors\n\t\t\t\tjob = jobs[ j ];\n\t\t\t\tjobs.splice( j, 1 );\n\t\t\t\tj -= 1;\n\t\t\t\ttry {\n\t\t\t\t\tif ( hasErrors ) {\n\t\t\t\t\t\tif ( typeof job.error === 'function' ) {\n\t\t\t\t\t\t\tjob.error( new Error( 'Module ' + module + ' has failed dependencies' ), [ module ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif ( typeof job.ready === 'function' ) {\n\t\t\t\t\t\t\tjob.ready();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\t// A user-defined callback raised an exception.\n\t\t\t\t\t// Swallow it to protect our state machine!\n\t\t\t\t\ttrack( 'resourceloader.exception', { exception: e, module: module, source: 'load-callback' } );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( registry[ module ].state === 'ready' ) {\n\t\t\t// The current module became 'ready'. Set it in the module store, and recursively execute all\n\t\t\t// dependent modules that are loaded and now have all dependencies satisfied.\n\t\t\trlLoader.store.set( module, registry[ module ] );\n\t\t\tfor ( m in registry ) {\n\t\t\t\tif ( registry[ m ].state === 'loaded' && allReady( registry[ m ].dependencies ) ) {\n\t\t\t\t\texecute( m );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Resolve dependencies and detect circular references.\n\t *\n\t * @private\n\t * @param {string} module Name of the top-level module whose dependencies shall be\n\t *  resolved and sorted.\n\t * @param {Array} resolved Returns a topological sort of the given module and its\n\t *  dependencies, such that later modules depend on earlier modules. The array\n\t *  contains the module names. If the array contains already some module names,\n\t *  this function appends its result to the pre-existing array.\n\t * @param {StringSet} [unresolved] Used to track the current dependency\n\t *  chain, and to report loops in the dependency graph.\n\t * @throws {Error} If any unregistered module or a dependency loop is encountered\n\t */\n\tfunction sortDependencies( module, resolved, unresolved ) {\n\t\tvar i, deps, skip;\n\n\t\tif ( !hasOwn.call( registry, module ) ) {\n\t\t\tthrow new Error( 'Unknown dependency: ' + module );\n\t\t}\n\n\t\tif ( registry[ module ].skip !== null ) {\n\t\t\t// eslint-disable-next-line no-new-func\n\t\t\tskip = new Function( registry[ module ].skip );\n\t\t\tregistry[ module ].skip = null;\n\t\t\tif ( skip() ) {\n\t\t\t\tregistry[ module ].skipped = true;\n\t\t\t\tregistry[ module ].dependencies = [];\n\t\t\t\tregistry[ module ].state = 'ready';\n\t\t\t\thandlePending( module );\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Resolves dynamic loader function and replaces it with its own results\n\t\tif ( typeof registry[ module ].dependencies === 'function' ) {\n\t\t\tregistry[ module ].dependencies = registry[ module ].dependencies();\n\t\t\t// Ensures the module's dependencies are always in an array\n\t\t\tif ( typeof registry[ module ].dependencies !== 'object' ) {\n\t\t\t\tregistry[ module ].dependencies = [ registry[ module ].dependencies ];\n\t\t\t}\n\t\t}\n\t\tif ( $.inArray( module, resolved ) !== -1 ) {\n\t\t\t// Module already resolved; nothing to do\n\t\t\treturn;\n\t\t}\n\t\t// Create unresolved if not passed in\n\t\tif ( !unresolved ) {\n\t\t\tunresolved = new StringSet();\n\t\t}\n\t\t// Tracks down dependencies\n\t\tdeps = registry[ module ].dependencies;\n\t\tfor ( i = 0; i < deps.length; i++ ) {\n\t\t\tif ( $.inArray( deps[ i ], resolved ) === -1 ) {\n\t\t\t\tif ( unresolved.has( deps[ i ] ) ) {\n\t\t\t\t\tthrow new Error( format(\n\t\t\t\t\t\t'Circular reference detected: $1 -> $2',\n\t\t\t\t\t\tmodule,\n\t\t\t\t\t\tdeps[ i ]\n\t\t\t\t\t) );\n\t\t\t\t}\n\n\t\t\t\tunresolved.add( module );\n\t\t\t\tsortDependencies( deps[ i ], resolved, unresolved );\n\t\t\t}\n\t\t}\n\t\tresolved.push( module );\n\t}\n\n\t/**\n\t * Get names of module that a module depends on, in their proper dependency order.\n\t *\n\t * @private\n\t * @param {string[]} modules Array of string module names\n\t * @return {Array} List of dependencies, including 'module'.\n\t * @throws {Error} If an unregistered module or a dependency loop is encountered\n\t */\n\tfunction resolve( modules ) {\n\t\tvar i, resolved = [];\n\t\tfor ( i = 0; i < modules.length; i++ ) {\n\t\t\tsortDependencies( modules[ i ], resolved );\n\t\t}\n\t\treturn resolved;\n\t}\n\n\t/**\n\t * Load and execute a script.\n\t *\n\t * @private\n\t * @param {string} src URL to script, will be used as the src attribute in the script tag\n\t * @return {jQuery.Promise}\n\t */\n\tfunction addScript( src ) {\n\t\treturn $.ajax( {\n\t\t\turl: src,\n\t\t\tdataType: 'script',\n\t\t\t// Force jQuery behaviour to be for crossDomain. Otherwise jQuery would use\n\t\t\t// XHR for a same domain request instead of <script>, which changes the request\n\t\t\t// headers (potentially missing a cache hit), and reduces caching in general\n\t\t\t// since browsers cache XHR much less (if at all). And XHR means we retrieve\n\t\t\t// text, so we'd need to $.globalEval, which then messes up line numbers.\n\t\t\tcrossDomain: true,\n\t\t\tcache: true\n\t\t} );\n\t}\n\n\t/**\n\t * Queue the loading and execution of a script for a particular module.\n\t *\n\t * @private\n\t * @param {string} src URL of the script\n\t * @param {string} [moduleName] Name of currently executing module\n\t * @return {jQuery.Promise}\n\t */\n\tfunction queueModuleScript( src, moduleName ) {\n\t\tvar r = $.Deferred();\n\n\t\tpendingRequests.push( function () {\n\t\t\tif ( moduleName && hasOwn.call( registry, moduleName ) ) {\n\t\t\t\t// Emulate runScript() part of execute()\n\t\t\t\twindow.require = rlLoader.require;\n\t\t\t\twindow.module = registry[ moduleName ].module;\n\t\t\t}\n\t\t\taddScript( src ).always( function () {\n\t\t\t\t// 'module.exports' should not persist after the file is executed to\n\t\t\t\t// avoid leakage to unrelated code. 'require' should be kept, however,\n\t\t\t\t// as asynchronous access to 'require' is allowed and expected. (T144879)\n\t\t\t\tdelete window.module;\n\t\t\t\tr.resolve();\n\n\t\t\t\t// Start the next one (if any)\n\t\t\t\tif ( pendingRequests[ 0 ] ) {\n\t\t\t\t\tpendingRequests.shift()();\n\t\t\t\t} else {\n\t\t\t\t\thandlingPendingRequests = false;\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t\tif ( !handlingPendingRequests && pendingRequests[ 0 ] ) {\n\t\t\thandlingPendingRequests = true;\n\t\t\tpendingRequests.shift()();\n\t\t}\n\t\treturn r.promise();\n\t}\n\n\t/**\n\t * Utility function for execute()\n\t *\n\t * @ignore\n\t * @param {string} [media] Media attribute\n\t * @param {string} url URL\n\t */\n\tfunction addLink( media, url ) {\n\t\tvar el = document.createElement( 'link' );\n\n\t\tel.rel = 'stylesheet';\n\t\tif ( media && media !== 'all' ) {\n\t\t\tel.media = media;\n\t\t}\n\t\t// If you end up here from an IE exception \"SCRIPT: Invalid property value.\",\n\t\t// see #addEmbeddedCSS, bug 31676, and bug 47277 for details.\n\t\tel.href = url;\n\n\t\t$( getMarker() ).before( el );\n\t}\n\n\t/**\n\t * Executes a loaded module, making it ready to use\n\t *\n\t * @private\n\t * @param {string} module Module name to execute\n\t */\n\tfunction execute( module ) {\n\t\tvar key, value, media, i, urls, cssHandle, checkCssHandles, runScript,\n\t\t\tcssHandlesRegistered = false;\n\n\t\tif ( !hasOwn.call( registry, module ) ) {\n\t\t\tthrow new Error( 'Module has not been registered yet: ' + module );\n\t\t}\n\t\tif ( registry[ module ].state !== 'loaded' ) {\n\t\t\tthrow new Error( 'Module in state \"' + registry[ module ].state + '\" may not be executed: ' + module );\n\t\t}\n\n\t\tregistry[ module ].state = 'executing';\n\n\t\trunScript = function () {\n\t\t\tvar script, markModuleReady, nestedAddScript, legacyWait, implicitDependencies,\n\t\t\t\t// Expand to include dependencies since we have to exclude both legacy modules\n\t\t\t\t// and their dependencies from the legacyWait (to prevent a circular dependency).\n\t\t\t\tlegacyModules = resolve( mw.config.get( 'wgResourceLoaderLegacyModules', [] ) );\n\n\t\t\tscript = registry[ module ].script;\n\t\t\tmarkModuleReady = function () {\n\t\t\t\tregistry[ module ].state = 'ready';\n\t\t\t\thandlePending( module );\n\t\t\t};\n\t\t\tnestedAddScript = function ( arr, callback, i ) {\n\t\t\t\t// Recursively call queueModuleScript() in its own callback\n\t\t\t\t// for each element of arr.\n\t\t\t\tif ( i >= arr.length ) {\n\t\t\t\t\t// We're at the end of the array\n\t\t\t\t\tcallback();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tqueueModuleScript( arr[ i ], module ).always( function () {\n\t\t\t\t\tnestedAddScript( arr, callback, i + 1 );\n\t\t\t\t} );\n\t\t\t};\n\n\t\t\timplicitDependencies = ( $.inArray( module, legacyModules ) !== -1 ) ?\n\t\t\t\t[] :\n\t\t\t\tlegacyModules;\n\n\t\t\tif ( module === 'user' ) {\n\t\t\t\t// Implicit dependency on the site module. Not real dependency because\n\t\t\t\t// it should run after 'site' regardless of whether it succeeds or fails.\n\t\t\t\timplicitDependencies.push( 'site' );\n\t\t\t}\n\n\t\t\tlegacyWait = implicitDependencies.length ?\n\t\t\t\trlLoader.using( implicitDependencies ) :\n\t\t\t\t$.Deferred().resolve();\n\n\t\t\tlegacyWait.always( function () {\n\t\t\t\ttry {\n\t\t\t\t\tif ( $.isArray( script ) ) {\n\t\t\t\t\t\tnestedAddScript( script, markModuleReady, 0 );\n\t\t\t\t\t} else if ( typeof script === 'function' ) {\n\t\t\t\t\t\t// Pass jQuery twice so that the signature of the closure which wraps\n\t\t\t\t\t\t// the script can bind both '$' and 'jQuery'.\n\t\t\t\t\t\tscript( $, $, rlLoader.require, registry[ module ].module );\n\t\t\t\t\t\tmarkModuleReady();\n\n\t\t\t\t\t} else if ( typeof script === 'string' ) {\n\t\t\t\t\t\t// Site and user modules are legacy scripts that run in the global scope.\n\t\t\t\t\t\t// This is transported as a string instead of a function to avoid needing\n\t\t\t\t\t\t// to use string manipulation to undo the function wrapper.\n\t\t\t\t\t\t$.globalEval( script );\n\t\t\t\t\t\tmarkModuleReady();\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Module without script\n\t\t\t\t\t\tmarkModuleReady();\n\t\t\t\t\t}\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\t// Use track instead of log because these errors are common in production mode\n\t\t\t\t\t// (e.g. undefined variable), and log is only enabled in debug mode.\n\t\t\t\t\tregistry[ module ].state = 'error';\n\t\t\t\t\tmw.track( 'resourceloader.exception', { exception: e, module: module, source: 'module-execute' } );\n\t\t\t\t\thandlePending( module );\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\n\t\t// Add localizations to message system\n\t\tif ( registry[ module ].messages ) {\n\t\t\tmw.messages.set( registry[ module ].messages );\n\t\t}\n\n\t\t// Initialise templates\n\t\tif ( registry[ module ].templates ) {\n\t\t\tmw.templates.set( module, registry[ module ].templates );\n\t\t}\n\n\t\t// Make sure we don't run the scripts until all stylesheet insertions have completed.\n\t\t( function () {\n\t\t\tvar pending = 0;\n\t\t\tcheckCssHandles = function () {\n\t\t\t\t// cssHandlesRegistered ensures we don't take off too soon, e.g. when\n\t\t\t\t// one of the cssHandles is fired while we're still creating more handles.\n\t\t\t\tif ( cssHandlesRegistered && pending === 0 && runScript ) {\n\t\t\t\t\trunScript();\n\t\t\t\t\trunScript = undefined; // Revoke\n\t\t\t\t}\n\t\t\t};\n\t\t\tcssHandle = function () {\n\t\t\t\tvar check = checkCssHandles;\n\t\t\t\tpending++;\n\t\t\t\treturn function () {\n\t\t\t\t\tif ( check ) {\n\t\t\t\t\t\tpending--;\n\t\t\t\t\t\tcheck();\n\t\t\t\t\t\tcheck = undefined; // Revoke\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t}() );\n\n\t\t// Process styles (see also rlLoader.implement)\n\t\t// * back-compat: { <media>: css }\n\t\t// * back-compat: { <media>: [url, ..] }\n\t\t// * { \"css\": [css, ..] }\n\t\t// * { \"url\": { <media>: [url, ..] } }\n\t\tif ( registry[ module ].style ) {\n\t\t\tfor ( key in registry[ module ].style ) {\n\t\t\t\tvalue = registry[ module ].style[ key ];\n\t\t\t\tmedia = undefined;\n\n\t\t\t\tif ( key !== 'url' && key !== 'css' ) {\n\t\t\t\t\t// Backwards compatibility, key is a media-type\n\t\t\t\t\tif ( typeof value === 'string' ) {\n\t\t\t\t\t\t// back-compat: { <media>: css }\n\t\t\t\t\t\t// Ignore 'media' because it isn't supported (nor was it used).\n\t\t\t\t\t\t// Strings are pre-wrapped in \"@media\". The media-type was just \"\"\n\t\t\t\t\t\t// (because it had to be set to something).\n\t\t\t\t\t\t// This is one of the reasons why this format is no longer used.\n\t\t\t\t\t\taddEmbeddedCSS( value, cssHandle() );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// back-compat: { <media>: [url, ..] }\n\t\t\t\t\t\tmedia = key;\n\t\t\t\t\t\tkey = 'bc-url';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Array of css strings in key 'css',\n\t\t\t\t// or back-compat array of urls from media-type\n\t\t\t\tif ( $.isArray( value ) ) {\n\t\t\t\t\tfor ( i = 0; i < value.length; i++ ) {\n\t\t\t\t\t\tif ( key === 'bc-url' ) {\n\t\t\t\t\t\t\t// back-compat: { <media>: [url, ..] }\n\t\t\t\t\t\t\taddLink( media, value[ i ] );\n\t\t\t\t\t\t} else if ( key === 'css' ) {\n\t\t\t\t\t\t\t// { \"css\": [css, ..] }\n\t\t\t\t\t\t\taddEmbeddedCSS( value[ i ], cssHandle() );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t// Not an array, but a regular object\n\t\t\t\t// Array of urls inside media-type key\n\t\t\t\t} else if ( typeof value === 'object' ) {\n\t\t\t\t\t// { \"url\": { <media>: [url, ..] } }\n\t\t\t\t\tfor ( media in value ) {\n\t\t\t\t\t\turls = value[ media ];\n\t\t\t\t\t\tfor ( i = 0; i < urls.length; i++ ) {\n\t\t\t\t\t\t\taddLink( media, urls[ i ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Kick off.\n\t\tcssHandlesRegistered = true;\n\t\tcheckCssHandles();\n\t}\n\n\t/**\n\t * Add one or more modules to the module load queue.\n\t *\n\t * See also #work().\n\t *\n\t * @private\n\t * @param {string|string[]} dependencies Module name or array of string module names\n\t * @param {Function} [ready] Callback to execute when all dependencies are ready\n\t * @param {Function} [error] Callback to execute when any dependency fails\n\t */\n\tfunction enqueue( dependencies, ready, error ) {\n\t\t// Allow calling by single module name\n\t\tif ( typeof dependencies === 'string' ) {\n\t\t\tdependencies = [ dependencies ];\n\t\t}\n\n\t\t// Add ready and error callbacks if they were given\n\t\tif ( ready !== undefined || error !== undefined ) {\n\t\t\tjobs.push( {\n\t\t\t\t// Narrow down the list to modules that are worth waiting for\n\t\t\t\tdependencies: $.grep( dependencies, function ( module ) {\n\t\t\t\t\tvar state = rlLoader.getState( module );\n\t\t\t\t\treturn state === 'registered' || state === 'loaded' || state === 'loading' || state === 'executing';\n\t\t\t\t} ),\n\t\t\t\tready: ready,\n\t\t\t\terror: error\n\t\t\t} );\n\t\t}\n\n\t\t$.each( dependencies, function ( idx, module ) {\n\t\t\tvar state = rlLoader.getState( module );\n\t\t\t// Only queue modules that are still in the initial 'registered' state\n\t\t\t// (not ones already loading, ready or error).\n\t\t\tif ( state === 'registered' && $.inArray( module, queue ) === -1 ) {\n\t\t\t\t// Private modules must be embedded in the page. Don't bother queuing\n\t\t\t\t// these as the server will deny them anyway (T101806).\n\t\t\t\tif ( registry[ module ].group === 'private' ) {\n\t\t\t\t\tregistry[ module ].state = 'error';\n\t\t\t\t\thandlePending( module );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tqueue.push( module );\n\t\t\t}\n\t\t} );\n\n\t\trlLoader.work();\n\t}\n\n\tfunction sortQuery( o ) {\n\t\tvar key,\n\t\t\tsorted = {},\n\t\t\ta = [];\n\n\t\tfor ( key in o ) {\n\t\t\tif ( hasOwn.call( o, key ) ) {\n\t\t\t\ta.push( key );\n\t\t\t}\n\t\t}\n\t\ta.sort();\n\t\tfor ( key = 0; key < a.length; key++ ) {\n\t\t\tsorted[ a[ key ] ] = o[ a[ key ] ];\n\t\t}\n\t\treturn sorted;\n\t}\n\n\t/**\n\t * Converts a module map of the form { foo: [ 'bar', 'baz' ], bar: [ 'baz, 'quux' ] }\n\t * to a query string of the form foo.bar,baz|bar.baz,quux\n\t *\n\t * @private\n\t * @param {Object} moduleMap Module map\n\t * @return {string} Module query string\n\t */\n\tfunction buildModulesString( moduleMap ) {\n\t\tvar p, prefix,\n\t\t\tarr = [];\n\n\t\tfor ( prefix in moduleMap ) {\n\t\t\tp = prefix === '' ? '' : prefix + '.';\n\t\t\tarr.push( p + moduleMap[ prefix ].join( ',' ) );\n\t\t}\n\t\treturn arr.join( '|' );\n\t}\n\n\t/**\n\t * Make a network request to load modules from the server.\n\t *\n\t * @private\n\t * @param {Object} moduleMap Module map, see #buildModulesString\n\t * @param {Object} currReqBase Object with other parameters (other than 'modules') to use in the request\n\t * @param {string} sourceLoadScript URL of load.php\n\t */\n\tfunction doRequest( moduleMap, currReqBase, sourceLoadScript ) {\n\t\tvar query = $.extend(\n\t\t\t{ modules: buildModulesString( moduleMap ) },\n\t\t\tcurrReqBase\n\t\t);\n\t\tquery = sortQuery( query );\n\t\taddScript( sourceLoadScript + '?' + $.param( query ) );\n\t}\n\n\t/**\n\t * Resolve indexed dependencies.\n\t *\n\t * ResourceLoader uses an optimization to save space which replaces module names in\n\t * dependency lists with the index of that module within the array of module\n\t * registration data if it exists. The benefit is a significant reduction in the data\n\t * size of the startup module. This function changes those dependency lists back to\n\t * arrays of strings.\n\t *\n\t * @private\n\t * @param {Array} modules Modules array\n\t */\n\tfunction resolveIndexedDependencies( modules ) {\n\t\tvar i, j, deps;\n\t\tfunction resolveIndex( dep ) {\n\t\t\treturn typeof dep === 'number' ? modules[ dep ][ 0 ] : dep;\n\t\t}\n\t\tfor ( i = 0; i < modules.length; i++ ) {\n\t\t\tdeps = modules[ i ][ 2 ];\n\t\t\tif ( deps ) {\n\t\t\t\tfor ( j = 0; j < deps.length; j++ ) {\n\t\t\t\t\tdeps[ j ] = resolveIndex( deps[ j ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Create network requests for a batch of modules.\n\t *\n\t * This is an internal method for #work(). This must not be called directly\n\t * unless the modules are already registered, and no request is in progress,\n\t * and the module state has already been set to `loading`.\n\t *\n\t * @private\n\t * @param {string[]} batch\n\t */\n\tfunction batchRequest( batch ) {\n\t\tvar reqBase, splits, maxQueryLength, b, bSource, bGroup, bSourceGroup,\n\t\t\tsource, group, i, modules, sourceLoadScript,\n\t\t\tcurrReqBase, currReqBaseLength, moduleMap, l,\n\t\t\tlastDotIndex, prefix, suffix, bytesAdded;\n\n\t\tif ( !batch.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Always order modules alphabetically to help reduce cache\n\t\t// misses for otherwise identical content.\n\t\tbatch.sort();\n\n\t\t// Build a list of query parameters common to all requests\n\t\treqBase = {\n\t\t\tskin: mw.config.get( 'skin' ),\n\t\t\tlang: mw.config.get( 'wgUserLanguage' ),\n\t\t\tdebug: mw.config.get( 'debug' )\n\t\t};\n\t\tmaxQueryLength = mw.config.get( 'wgResourceLoaderMaxQueryLength', 2000 );\n\n\t\t// Split module list by source and by group.\n\t\tsplits = {};\n\t\tfor ( b = 0; b < batch.length; b++ ) {\n\t\t\tbSource = registry[ batch[ b ] ].source;\n\t\t\tbGroup = registry[ batch[ b ] ].group;\n\t\t\tif ( !hasOwn.call( splits, bSource ) ) {\n\t\t\t\tsplits[ bSource ] = {};\n\t\t\t}\n\t\t\tif ( !hasOwn.call( splits[ bSource ], bGroup ) ) {\n\t\t\t\tsplits[ bSource ][ bGroup ] = [];\n\t\t\t}\n\t\t\tbSourceGroup = splits[ bSource ][ bGroup ];\n\t\t\tbSourceGroup.push( batch[ b ] );\n\t\t}\n\n\t\tfor ( source in splits ) {\n\n\t\t\tsourceLoadScript = sources[ source ];\n\n\t\t\tfor ( group in splits[ source ] ) {\n\n\t\t\t\t// Cache access to currently selected list of\n\t\t\t\t// modules for this group from this source.\n\t\t\t\tmodules = splits[ source ][ group ];\n\n\t\t\t\tcurrReqBase = $.extend( {\n\t\t\t\t\tversion: getCombinedVersion( modules )\n\t\t\t\t}, reqBase );\n\t\t\t\t// For user modules append a user name to the query string.\n\t\t\t\tif ( group === 'user' && mw.config.get( 'wgUserName' ) !== null ) {\n\t\t\t\t\tcurrReqBase.user = mw.config.get( 'wgUserName' );\n\t\t\t\t}\n\t\t\t\tcurrReqBaseLength = $.param( currReqBase ).length;\n\t\t\t\t// We may need to split up the request to honor the query string length limit,\n\t\t\t\t// so build it piece by piece.\n\t\t\t\tl = currReqBaseLength + 9; // '&modules='.length == 9\n\n\t\t\t\tmoduleMap = {}; // { prefix: [ suffixes ] }\n\n\t\t\t\tfor ( i = 0; i < modules.length; i++ ) {\n\t\t\t\t\t// Determine how many bytes this module would add to the query string\n\t\t\t\t\tlastDotIndex = modules[ i ].lastIndexOf( '.' );\n\n\t\t\t\t\t// If lastDotIndex is -1, substr() returns an empty string\n\t\t\t\t\tprefix = modules[ i ].substr( 0, lastDotIndex );\n\t\t\t\t\tsuffix = modules[ i ].slice( lastDotIndex + 1 );\n\n\t\t\t\t\tbytesAdded = hasOwn.call( moduleMap, prefix ) ?\n\t\t\t\t\t\tsuffix.length + 3 : // '%2C'.length == 3\n\t\t\t\t\t\tmodules[ i ].length + 3; // '%7C'.length == 3\n\n\t\t\t\t\t// If the url would become too long, create a new one,\n\t\t\t\t\t// but don't create empty requests\n\t\t\t\t\tif ( maxQueryLength > 0 && !$.isEmptyObject( moduleMap ) && l + bytesAdded > maxQueryLength ) {\n\t\t\t\t\t\t// This url would become too long, create a new one, and start the old one\n\t\t\t\t\t\tdoRequest( moduleMap, currReqBase, sourceLoadScript );\n\t\t\t\t\t\tmoduleMap = {};\n\t\t\t\t\t\tl = currReqBaseLength + 9;\n\t\t\t\t\t\ttrack( 'resourceloader.splitRequest', { maxQueryLength: maxQueryLength } );\n\t\t\t\t\t}\n\t\t\t\t\tif ( !hasOwn.call( moduleMap, prefix ) ) {\n\t\t\t\t\t\tmoduleMap[ prefix ] = [];\n\t\t\t\t\t}\n\t\t\t\t\tmoduleMap[ prefix ].push( suffix );\n\t\t\t\t\tl += bytesAdded;\n\t\t\t\t}\n\t\t\t\t// If there's anything left in moduleMap, request that too\n\t\t\t\tif ( !$.isEmptyObject( moduleMap ) ) {\n\t\t\t\t\tdoRequest( moduleMap, currReqBase, sourceLoadScript );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t * @param {string[]} implementations Array containing pieces of JavaScript code in the\n\t *  form of calls to rlLoader#implement().\n\t * @param {Function} cb Callback in case of failure\n\t * @param {Error} cb.err\n\t */\n\tfunction asyncEval( implementations, cb ) {\n\t\tif ( !implementations.length ) {\n\t\t\treturn;\n\t\t}\n\t\trequestIdleCallback( function () {\n\t\t\ttry {\n\t\t\t\t$.globalEval( implementations.join( ';' ) );\n\t\t\t} catch ( err ) {\n\t\t\t\tcb( err );\n\t\t\t}\n\t\t} );\n\t}\n\n\t/**\n\t * Make a versioned key for a specific module.\n\t *\n\t * @private\n\t * @param {string} module Module name\n\t * @return {string|null} Module key in format '`[name]@[version]`',\n\t *  or null if the module does not exist\n\t */\n\tfunction getModuleKey( module ) {\n\t\treturn hasOwn.call( registry, module ) ?\n\t\t\t( module + '@' + registry[ module ].version ) : null;\n\t}\n\n\t/**\n\t * @private\n\t * @param {string} key Module name or '`[name]@[version]`'\n\t * @return {Object}\n\t */\n\tfunction splitModuleKey( key ) {\n\t\tvar index = key.indexOf( '@' );\n\t\tif ( index === -1 ) {\n\t\t\treturn { name: key };\n\t\t}\n\t\treturn {\n\t\t\tname: key.slice( 0, index ),\n\t\t\tversion: key.slice( index + 1 )\n\t\t};\n\t}\n\n\t/* Public Members */\n\treturn {\n\t\t/**\n\t\t * The module registry is exposed as an aid for debugging and inspecting page\n\t\t * state; it is not a public interface for modifying the registry.\n\t\t *\n\t\t * @see #registry\n\t\t * @property\n\t\t * @private\n\t\t */\n\t\tmoduleRegistry: registry,\n\n\t\t/**\n\t\t * @inheritdoc #newStyleTag\n\t\t * @method\n\t\t */\n\t\taddStyleTag: newStyleTag,\n\n\t\t/**\n\t\t * Start loading of all queued module dependencies.\n\t\t *\n\t\t * @protected\n\t\t */\n\t\twork: function () {\n\t\t\tvar q, batch, implementations, sourceModules;\n\n\t\t\tbatch = [];\n\n\t\t\t// Appends a list of modules from the queue to the batch\n\t\t\tfor ( q = 0; q < queue.length; q++ ) {\n\t\t\t\t// Only load modules which are registered\n\t\t\t\tif ( hasOwn.call( registry, queue[ q ] ) && registry[ queue[ q ] ].state === 'registered' ) {\n\t\t\t\t\t// Prevent duplicate entries\n\t\t\t\t\tif ( $.inArray( queue[ q ], batch ) === -1 ) {\n\t\t\t\t\t\tbatch.push( queue[ q ] );\n\t\t\t\t\t\t// Mark registered modules as loading\n\t\t\t\t\t\tregistry[ queue[ q ] ].state = 'loading';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Now that the queue has been processed into a batch, clear the queue.\n\t\t\t// This MUST happen before we initiate any eval or network request. Otherwise,\n\t\t\t// it is possible for a cached script to instantly trigger the same work queue\n\t\t\t// again; all before we've cleared it causing each request to include modules\n\t\t\t// which are already loaded.\n\t\t\tqueue = [];\n\n\t\t\tif ( !batch.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\trlLoader.store.init();\n\t\t\tif ( rlLoader.store.enabled ) {\n\t\t\t\timplementations = [];\n\t\t\t\tsourceModules = [];\n\t\t\t\tbatch = $.grep( batch, function ( module ) {\n\t\t\t\t\tvar implementation = rlLoader.store.get( module );\n\t\t\t\t\tif ( implementation ) {\n\t\t\t\t\t\timplementations.push( implementation );\n\t\t\t\t\t\tsourceModules.push( module );\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t} );\n\t\t\t\tasyncEval( implementations, function ( err ) {\n\t\t\t\t\tvar failed;\n\t\t\t\t\t// Not good, the cached rlLoader.implement calls failed! This should\n\t\t\t\t\t// never happen, barring ResourceLoader bugs, browser bugs and PEBKACs.\n\t\t\t\t\t// Depending on how corrupt the string is, it is likely that some\n\t\t\t\t\t// modules' implement() succeeded while the ones after the error will\n\t\t\t\t\t// never run and leave their modules in the 'loading' state forever.\n\t\t\t\t\trlLoader.store.stats.failed++;\n\n\t\t\t\t\t// Since this is an error not caused by an individual module but by\n\t\t\t\t\t// something that infected the implement call itself, don't take any\n\t\t\t\t\t// risks and clear everything in this cache.\n\t\t\t\t\trlLoader.store.clear();\n\n\t\t\t\t\ttrack( 'resourceloader.exception', { exception: err, source: 'store-eval' } );\n\t\t\t\t\t// Re-add the failed ones that are still pending back to the batch\n\t\t\t\t\tfailed = $.grep( sourceModules, function ( module ) {\n\t\t\t\t\t\treturn registry[ module ].state === 'loading';\n\t\t\t\t\t} );\n\t\t\t\t\tbatchRequest( failed );\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tbatchRequest( batch );\n\t\t},\n\n\t\t/**\n\t\t * Register a source.\n\t\t *\n\t\t * The #work() method will use this information to split up requests by source.\n\t\t *\n\t\t *     rlLoader.addSource( 'mediawikiwiki', '//www.mediawiki.org/w/load.php' );\n\t\t *\n\t\t * @param {string|Object} id Source ID, or object mapping ids to load urls\n\t\t * @param {string} loadUrl Url to a load.php end point\n\t\t * @throws {Error} If source id is already registered\n\t\t */\n\t\taddSource: function ( id, loadUrl ) {\n\t\t\tvar source;\n\t\t\t// Allow multiple additions\n\t\t\tif ( typeof id === 'object' ) {\n\t\t\t\tfor ( source in id ) {\n\t\t\t\t\trlLoader.addSource( source, id[ source ] );\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( hasOwn.call( sources, id ) ) {\n\t\t\t\tthrow new Error( 'source already registered: ' + id );\n\t\t\t}\n\n\t\t\tsources[ id ] = loadUrl;\n\t\t},\n\n\t\t/**\n\t\t * Register a module, letting the system know about it and its properties.\n\t\t *\n\t\t * The startup modules contain calls to this method.\n\t\t *\n\t\t * When using multiple module registration by passing an array, dependencies that\n\t\t * are specified as references to modules within the array will be resolved before\n\t\t * the modules are registered.\n\t\t *\n\t\t * @param {string|Array} module Module name or array of arrays, each containing\n\t\t *  a list of arguments compatible with this method\n\t\t * @param {string|number} version Module version hash (falls backs to empty string)\n\t\t *  Can also be a number (timestamp) for compatibility with MediaWiki 1.25 and earlier.\n\t\t * @param {string|Array|Function} dependencies One string or array of strings of module\n\t\t *  names on which this module depends, or a function that returns that array.\n\t\t * @param {string} [group=null] Group which the module is in\n\t\t * @param {string} [source='local'] Name of the source\n\t\t * @param {string} [skip=null] Script body of the skip function\n\t\t */\n\t\tregister: function ( module, version, dependencies, group, source, skip ) {\n\t\t\tvar i, deps;\n\t\t\t// Allow multiple registration\n\t\t\tif ( typeof module === 'object' ) {\n\t\t\t\tresolveIndexedDependencies( module );\n\t\t\t\tfor ( i = 0; i < module.length; i++ ) {\n\t\t\t\t\t// module is an array of module names\n\t\t\t\t\tif ( typeof module[ i ] === 'string' ) {\n\t\t\t\t\t\trlLoader.register( module[ i ] );\n\t\t\t\t\t// module is an array of arrays\n\t\t\t\t\t} else if ( typeof module[ i ] === 'object' ) {\n\t\t\t\t\t\trlLoader.register.apply( rlLoader, module[ i ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( hasOwn.call( registry, module ) ) {\n\t\t\t\tthrow new Error( 'module already registered: ' + module );\n\t\t\t}\n\t\t\tif ( typeof dependencies === 'string' ) {\n\t\t\t\t// A single module name\n\t\t\t\tdeps = [ dependencies ];\n\t\t\t} else if ( typeof dependencies === 'object' || typeof dependencies === 'function' ) {\n\t\t\t\t// Array of module names or a function that returns an array\n\t\t\t\tdeps = dependencies;\n\t\t\t}\n\t\t\t// List the module as registered\n\t\t\tregistry[ module ] = {\n\t\t\t\t// Exposed to execute() for rlLoader.implement() closures.\n\t\t\t\t// Import happens via require().\n\t\t\t\tmodule: {\n\t\t\t\t\texports: {}\n\t\t\t\t},\n\t\t\t\tversion: version !== undefined ? String( version ) : '',\n\t\t\t\tdependencies: deps || [],\n\t\t\t\tgroup: typeof group === 'string' ? group : null,\n\t\t\t\tsource: typeof source === 'string' ? source : 'local',\n\t\t\t\tstate: 'registered',\n\t\t\t\tskip: typeof skip === 'string' ? skip : null\n\t\t\t};\n\t\t},\n\n\t\t/**\n\t\t * Implement a module given the components that make up the module.\n\t\t *\n\t\t * When #load() or #using() requests one or more modules, the server\n\t\t * response contain calls to this function.\n\t\t *\n\t\t * @param {string} module Name of module and current module version. Formatted\n\t\t *  as '`[name]@[version]`\". This version should match the requested version\n\t\t *  (from #batchRequest and #registry). This avoids race conditions (T117587).\n\t\t *  For back-compat with MediaWiki 1.27 and earlier, the version may be omitted.\n\t\t * @param {Function|Array|string} [script] Function with module code, list of URLs\n\t\t *  to load via `<script src>`, or string of module code for `$.globalEval()`.\n\t\t * @param {Object} [style] Should follow one of the following patterns:\n\t\t *\n\t\t *     { \"css\": [css, ..] }\n\t\t *     { \"url\": { <media>: [url, ..] } }\n\t\t *\n\t\t * And for backwards compatibility (needs to be supported forever due to caching):\n\t\t *\n\t\t *     { <media>: css }\n\t\t *     { <media>: [url, ..] }\n\t\t *\n\t\t * The reason css strings are not concatenated anymore is bug 31676. We now check\n\t\t * whether it's safe to extend the stylesheet.\n\t\t *\n\t\t * @protected\n\t\t * @param {Object} [messages] List of key/value pairs to be added to mw#messages.\n\t\t * @param {Object} [templates] List of key/value pairs to be added to mw#templates.\n\t\t */\n\t\timplement: function ( module, script, style, messages, templates ) {\n\t\t\tvar split = splitModuleKey( module ),\n\t\t\t\tname = split.name,\n\t\t\t\tversion = split.version;\n\t\t\t// Automatically register module\n\t\t\tif ( !hasOwn.call( registry, name ) ) {\n\t\t\t\trlLoader.register( name );\n\t\t\t}\n\t\t\t// Check for duplicate implementation\n\t\t\tif ( hasOwn.call( registry, name ) && registry[ name ].script !== undefined ) {\n\t\t\t\tthrow new Error( 'module already implemented: ' + name );\n\t\t\t}\n\t\t\tif ( version ) {\n\t\t\t\t// Without this reset, if there is a version mismatch between the\n\t\t\t\t// requested and received module version, then rlLoader.store would\n\t\t\t\t// cache the response under the requested key. Thus poisoning the cache\n\t\t\t\t// indefinitely with a stale value. (T117587)\n\t\t\t\tregistry[ name ].version = version;\n\t\t\t}\n\t\t\t// Attach components\n\t\t\tregistry[ name ].script = script || null;\n\t\t\tregistry[ name ].style = style || null;\n\t\t\tregistry[ name ].messages = messages || null;\n\t\t\tregistry[ name ].templates = templates || null;\n\t\t\t// The module may already have been marked as erroneous\n\t\t\tif ( $.inArray( registry[ name ].state, [ 'error', 'missing' ] ) === -1 ) {\n\t\t\t\tregistry[ name ].state = 'loaded';\n\t\t\t\tif ( allReady( registry[ name ].dependencies ) ) {\n\t\t\t\t\texecute( name );\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Execute a function as soon as one or more required modules are ready.\n\t\t *\n\t\t * Example of inline dependency on OOjs:\n\t\t *\n\t\t *     rlLoader.using( 'oojs', function () {\n\t\t *         OO.compare( [ 1 ], [ 1 ] );\n\t\t *     } );\n\t\t *\n\t\t * Since MediaWiki 1.23 this also returns a promise.\n\t\t *\n\t\t * Since MediaWiki 1.28 the promise is resolved with a `require` function.\n\t\t *\n\t\t * @param {string|Array} dependencies Module name or array of modules names the\n\t\t *  callback depends on to be ready before executing\n\t\t * @param {Function} [ready] Callback to execute when all dependencies are ready\n\t\t * @param {Function} [error] Callback to execute if one or more dependencies failed\n\t\t * @return {jQuery.Promise} With a `require` function\n\t\t */\n\t\tusing: function ( dependencies, ready, error ) {\n\t\t\tvar deferred = $.Deferred();\n\n\t\t\t// Allow calling with a single dependency as a string\n\t\t\tif ( typeof dependencies === 'string' ) {\n\t\t\t\tdependencies = [ dependencies ];\n\t\t\t}\n\n\t\t\tif ( ready ) {\n\t\t\t\tdeferred.done( ready );\n\t\t\t}\n\t\t\tif ( error ) {\n\t\t\t\tdeferred.fail( error );\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// Resolve entire dependency map\n\t\t\t\tdependencies = resolve( dependencies );\n\t\t\t} catch ( e ) {\n\t\t\t\treturn deferred.reject( e ).promise();\n\t\t\t}\n\t\t\tif ( allReady( dependencies ) ) {\n\t\t\t\t// Run ready immediately\n\t\t\t\tdeferred.resolve( rlLoader.require );\n\t\t\t} else if ( anyFailed( dependencies ) ) {\n\t\t\t\t// Execute error immediately if any dependencies have errors\n\t\t\t\tdeferred.reject(\n\t\t\t\t\tnew Error( 'One or more dependencies failed to load' ),\n\t\t\t\t\tdependencies\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// Not all dependencies are ready, add to the load queue\n\t\t\t\tenqueue( dependencies, function () {\n\t\t\t\t\tdeferred.resolve( rlLoader.require );\n\t\t\t\t}, deferred.reject );\n\t\t\t}\n\n\t\t\treturn deferred.promise();\n\t\t},\n\n\t\t/**\n\t\t * Load an external script or one or more modules.\n\t\t *\n\t\t * @param {string|Array} modules Either the name of a module, array of modules,\n\t\t *  or a URL of an external script or style\n\t\t * @param {string} [type='text/javascript'] MIME type to use if calling with a URL of an\n\t\t *  external script or style; acceptable values are \"text/css\" and\n\t\t *  \"text/javascript\"; if no type is provided, text/javascript is assumed.\n\t\t */\n\t\tload: function ( modules, type ) {\n\t\t\tvar filtered, l;\n\n\t\t\t// Allow calling with a url or single dependency as a string\n\t\t\tif ( typeof modules === 'string' ) {\n\t\t\t\t// \"https://example.org/x.js\", \"http://example.org/x.js\", \"//example.org/x.js\", \"/x.js\"\n\t\t\t\tif ( /^(https?:)?\\/?\\//.test( modules ) ) {\n\t\t\t\t\tif ( type === 'text/css' ) {\n\t\t\t\t\t\t// Support: IE 7-8\n\t\t\t\t\t\t// Use properties instead of attributes as IE throws security\n\t\t\t\t\t\t// warnings when inserting a <link> tag with a protocol-relative\n\t\t\t\t\t\t// URL set though attributes - when on HTTPS. See bug 41331.\n\t\t\t\t\t\tl = document.createElement( 'link' );\n\t\t\t\t\t\tl.rel = 'stylesheet';\n\t\t\t\t\t\tl.href = modules;\n\t\t\t\t\t\t$( 'head' ).append( l );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif ( type === 'text/javascript' || type === undefined ) {\n\t\t\t\t\t\taddScript( modules );\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// Unknown type\n\t\t\t\t\tthrow new Error( 'invalid type for external url, must be text/css or text/javascript. not ' + type );\n\t\t\t\t}\n\t\t\t\t// Called with single module\n\t\t\t\tmodules = [ modules ];\n\t\t\t}\n\n\t\t\t// Filter out undefined modules, otherwise resolve() will throw\n\t\t\t// an exception for trying to load an undefined module.\n\t\t\t// Undefined modules are acceptable here in load(), because load() takes\n\t\t\t// an array of unrelated modules, whereas the modules passed to\n\t\t\t// using() are related and must all be loaded.\n\t\t\tfiltered = $.grep( modules, function ( module ) {\n\t\t\t\tvar state = rlLoader.getState( module );\n\t\t\t\treturn state !== null && state !== 'error' && state !== 'missing';\n\t\t\t} );\n\n\t\t\tif ( filtered.length === 0 ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Resolve entire dependency map\n\t\t\tfiltered = resolve( filtered );\n\t\t\t// If all modules are ready, or if any modules have errors, nothing to be done.\n\t\t\tif ( allReady( filtered ) || anyFailed( filtered ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Some modules are not yet ready, add to module load queue.\n\t\t\tenqueue( filtered, undefined, undefined );\n\t\t},\n\n\t\t/**\n\t\t * Change the state of one or more modules.\n\t\t *\n\t\t * @param {string|Object} module Module name or object of module name/state pairs\n\t\t * @param {string} state State name\n\t\t */\n\t\tstate: function ( module, state ) {\n\t\t\tvar m;\n\n\t\t\tif ( typeof module === 'object' ) {\n\t\t\t\tfor ( m in module ) {\n\t\t\t\t\trlLoader.state( m, module[ m ] );\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( !hasOwn.call( registry, module ) ) {\n\t\t\t\trlLoader.register( module );\n\t\t\t}\n\t\t\tregistry[ module ].state = state;\n\t\t\tif ( $.inArray( state, [ 'ready', 'error', 'missing' ] ) !== -1 ) {\n\t\t\t\t// Make sure pending modules depending on this one get executed if their\n\t\t\t\t// dependencies are now fulfilled!\n\t\t\t\thandlePending( module );\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Get the version of a module.\n\t\t *\n\t\t * @param {string} module Name of module\n\t\t * @return {string|null} The version, or null if the module (or its version) is not\n\t\t *  in the registry.\n\t\t */\n\t\tgetVersion: function ( module ) {\n\t\t\tif ( !hasOwn.call( registry, module ) || registry[ module ].version === undefined ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn registry[ module ].version;\n\t\t},\n\n\t\t/**\n\t\t * Get the state of a module.\n\t\t *\n\t\t * @param {string} module Name of module\n\t\t * @return {string|null} The state, or null if the module (or its state) is not\n\t\t *  in the registry.\n\t\t */\n\t\tgetState: function ( module ) {\n\t\t\tif ( !hasOwn.call( registry, module ) || registry[ module ].state === undefined ) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn registry[ module ].state;\n\t\t},\n\n\t\t/**\n\t\t * Get the names of all registered modules.\n\t\t *\n\t\t * @return {Array}\n\t\t */\n\t\tgetModuleNames: function () {\n\t\t\treturn $.map( registry, function ( i, key ) {\n\t\t\t\treturn key;\n\t\t\t} );\n\t\t},\n\n\t\t/**\n\t\t * Get the exported value of a module.\n\t\t *\n\t\t * Modules may provide this via their local `module.exports`.\n\t\t *\n\t\t * @protected\n\t\t * @since 1.27\n\t\t * @param {string} moduleName Module name\n\t\t * @return {Mixed} Exported value\n\t\t */\n\t\trequire: function ( moduleName ) {\n\t\t\tvar state = rlLoader.getState( moduleName );\n\n\t\t\t// Only ready modules can be required\n\t\t\tif ( state !== 'ready' ) {\n\t\t\t\t// Module may've forgotten to declare a dependency\n\t\t\t\tthrow new Error( 'Module \"' + moduleName + '\" is not loaded.' );\n\t\t\t}\n\n\t\t\treturn registry[ moduleName ].module.exports;\n\t\t},\n\n\t\t/**\n\t\t * @inheritdoc mw.inspect#runReports\n\t\t * @method\n\t\t */\n\t\tinspect: function () {\n\t\t\tvar args = slice.call( arguments );\n\t\t\trlLoader.using( 'mediawiki.inspect', function () {\n\t\t\t\tmw.inspect.runReports.apply( mw.inspect, args );\n\t\t\t} );\n\t\t},\n\n\t\t/**\n\t\t * On browsers that implement the localStorage API, the module store serves as a\n\t\t * smart complement to the browser cache. Unlike the browser cache, the module store\n\t\t * can slice a concatenated response from ResourceLoader into its constituent\n\t\t * modules and cache each of them separately, using each module's versioning scheme\n\t\t * to determine when the cache should be invalidated.\n\t\t *\n\t\t * @singleton\n\t\t * @class rlLoader.store\n\t\t */\n\t\tstore: {\n\t\t\t// Whether the store is in use on this page.\n\t\t\tenabled: null,\n\n\t\t\tMODULE_SIZE_MAX: 100 * 1000,\n\n\t\t\t// The contents of the store, mapping '[name]@[version]' keys\n\t\t\t// to module implementations.\n\t\t\titems: {},\n\n\t\t\t// Cache hit stats\n\t\t\tstats: { hits: 0, misses: 0, expired: 0, failed: 0 },\n\n\t\t\t/**\n\t\t\t * Construct a JSON-serializable object representing the content of the store.\n\t\t\t *\n\t\t\t * @return {Object} Module store contents.\n\t\t\t */\n\t\t\ttoJSON: function () {\n\t\t\t\treturn { items: rlLoader.store.items, vary: rlLoader.store.getVary() };\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Get the localStorage key for the entire module store. The key references\n\t\t\t * $wgDBname to prevent clashes between wikis which share a common host.\n\t\t\t *\n\t\t\t * @return {string} localStorage item key\n\t\t\t */\n\t\t\tgetStoreKey: function () {\n\t\t\t\treturn 'MediaWikiModuleStore:' + mw.config.get( 'wgDBname' );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Get a key on which to vary the module cache.\n\t\t\t *\n\t\t\t * @return {string} String of concatenated vary conditions.\n\t\t\t */\n\t\t\tgetVary: function () {\n\t\t\t\treturn [\n\t\t\t\t\tmw.config.get( 'skin' ),\n\t\t\t\t\tmw.config.get( 'wgResourceLoaderStorageVersion' ),\n\t\t\t\t\tmw.config.get( 'wgUserLanguage' )\n\t\t\t\t].join( ':' );\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Initialize the store.\n\t\t\t *\n\t\t\t * Retrieves store from localStorage and (if successfully retrieved) decoding\n\t\t\t * the stored JSON value to a plain object.\n\t\t\t *\n\t\t\t * The try / catch block is used for JSON & localStorage feature detection.\n\t\t\t * See the in-line documentation for Modernizr's localStorage feature detection\n\t\t\t * code for a full account of why we need a try / catch:\n\t\t\t * <https://github.com/Modernizr/Modernizr/blob/v2.7.1/modernizr.js#L771-L796>.\n\t\t\t */\n\t\t\tinit: function () {\n\t\t\t\tvar raw, data;\n\n\t\t\t\tif ( rlLoader.store.enabled !== null ) {\n\t\t\t\t\t// Init already ran\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t// Disabled because localStorage quotas are tight and (in Firefox's case)\n\t\t\t\t\t// shared by multiple origins.\n\t\t\t\t\t// See T66721, and <https://bugzilla.mozilla.org/show_bug.cgi?id=1064466>.\n\t\t\t\t\t/Firefox|Opera/.test( navigator.userAgent ) ||\n\n\t\t\t\t\t// Disabled by configuration.\n\t\t\t\t\t!mw.config.get( 'wgResourceLoaderStorageEnabled' )\n\t\t\t\t) {\n\t\t\t\t\t// Clear any previous store to free up space. (T66721)\n\t\t\t\t\trlLoader.store.clear();\n\t\t\t\t\trlLoader.store.enabled = false;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif ( mw.config.get( 'debug' ) ) {\n\t\t\t\t\t// Disable module store in debug mode\n\t\t\t\t\trlLoader.store.enabled = false;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\traw = localStorage.getItem( rlLoader.store.getStoreKey() );\n\t\t\t\t\t// If we get here, localStorage is available; mark enabled\n\t\t\t\t\trlLoader.store.enabled = true;\n\t\t\t\t\tdata = JSON.parse( raw );\n\t\t\t\t\tif ( data && typeof data.items === 'object' && data.vary === rlLoader.store.getVary() ) {\n\t\t\t\t\t\trlLoader.store.items = data.items;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\ttrack( 'resourceloader.exception', { exception: e, source: 'store-localstorage-init' } );\n\t\t\t\t}\n\n\t\t\t\tif ( raw === undefined ) {\n\t\t\t\t\t// localStorage failed; disable store\n\t\t\t\t\trlLoader.store.enabled = false;\n\t\t\t\t} else {\n\t\t\t\t\trlLoader.store.update();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Retrieve a module from the store and update cache hit stats.\n\t\t\t *\n\t\t\t * @param {string} module Module name\n\t\t\t * @return {string|boolean} Module implementation or false if unavailable\n\t\t\t */\n\t\t\tget: function ( module ) {\n\t\t\t\tvar key;\n\n\t\t\t\tif ( !rlLoader.store.enabled ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tkey = getModuleKey( module );\n\t\t\t\tif ( key in rlLoader.store.items ) {\n\t\t\t\t\trlLoader.store.stats.hits++;\n\t\t\t\t\treturn rlLoader.store.items[ key ];\n\t\t\t\t}\n\t\t\t\trlLoader.store.stats.misses++;\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Stringify a module and queue it for storage.\n\t\t\t *\n\t\t\t * @param {string} module Module name\n\t\t\t * @param {Object} descriptor The module's descriptor as set in the registry\n\t\t\t * @return {boolean} Module was set\n\t\t\t */\n\t\t\tset: function ( module, descriptor ) {\n\t\t\t\tvar args, key, src;\n\n\t\t\t\tif ( !rlLoader.store.enabled ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tkey = getModuleKey( module );\n\n\t\t\t\tif (\n\t\t\t\t\t// Already stored a copy of this exact version\n\t\t\t\t\tkey in rlLoader.store.items ||\n\t\t\t\t\t// Module failed to load\n\t\t\t\t\tdescriptor.state !== 'ready' ||\n\t\t\t\t\t// Unversioned, private, or site-/user-specific\n\t\t\t\t\t( !descriptor.version || $.inArray( descriptor.group, [ 'private', 'user' ] ) !== -1 ) ||\n\t\t\t\t\t// Partial descriptor\n\t\t\t\t\t// (e.g. skipped module, or style module with state=ready)\n\t\t\t\t\t$.inArray( undefined, [ descriptor.script, descriptor.style,\n\t\t\t\t\t\tdescriptor.messages, descriptor.templates ] ) !== -1\n\t\t\t\t) {\n\t\t\t\t\t// Decline to store\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\targs = [\n\t\t\t\t\t\tJSON.stringify( key ),\n\t\t\t\t\t\ttypeof descriptor.script === 'function' ?\n\t\t\t\t\t\t\tString( descriptor.script ) :\n\t\t\t\t\t\t\tJSON.stringify( descriptor.script ),\n\t\t\t\t\t\tJSON.stringify( descriptor.style ),\n\t\t\t\t\t\tJSON.stringify( descriptor.messages ),\n\t\t\t\t\t\tJSON.stringify( descriptor.templates )\n\t\t\t\t\t];\n\t\t\t\t\t// Attempted workaround for a possible Opera bug (bug T59567).\n\t\t\t\t\t// This regex should never match under sane conditions.\n\t\t\t\t\tif ( /^\\s*\\(/.test( args[ 1 ] ) ) {\n\t\t\t\t\t\targs[ 1 ] = 'function' + args[ 1 ];\n\t\t\t\t\t\ttrack( 'resourceloader.assert', { source: 'bug-T59567' } );\n\t\t\t\t\t}\n\t\t\t\t} catch ( e ) {\n\t\t\t\t\ttrack( 'resourceloader.exception', { exception: e, source: 'store-localstorage-json' } );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tsrc = 'rlLoader.implement(' + args.join( ',' ) + ');';\n\t\t\t\tif ( src.length > rlLoader.store.MODULE_SIZE_MAX ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\trlLoader.store.items[ key ] = src;\n\t\t\t\trlLoader.store.update();\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Iterate through the module store, removing any item that does not correspond\n\t\t\t * (in name and version) to an item in the module registry.\n\t\t\t *\n\t\t\t * @return {boolean} Store was pruned\n\t\t\t */\n\t\t\tprune: function () {\n\t\t\t\tvar key, module;\n\n\t\t\t\tif ( !rlLoader.store.enabled ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tfor ( key in rlLoader.store.items ) {\n\t\t\t\t\tmodule = key.slice( 0, key.indexOf( '@' ) );\n\t\t\t\t\tif ( getModuleKey( module ) !== key ) {\n\t\t\t\t\t\trlLoader.store.stats.expired++;\n\t\t\t\t\t\tdelete rlLoader.store.items[ key ];\n\t\t\t\t\t} else if ( rlLoader.store.items[ key ].length > rlLoader.store.MODULE_SIZE_MAX ) {\n\t\t\t\t\t\t// This value predates the enforcement of a size limit on cached modules.\n\t\t\t\t\t\tdelete rlLoader.store.items[ key ];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Clear the entire module store right now.\n\t\t\t */\n\t\t\tclear: function () {\n\t\t\t\trlLoader.store.items = {};\n\t\t\t\ttry {\n\t\t\t\t\tlocalStorage.removeItem( rlLoader.store.getStoreKey() );\n\t\t\t\t} catch ( ignored ) {}\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * Sync in-memory store back to localStorage.\n\t\t\t *\n\t\t\t * This function debounces updates. When called with a flush already pending,\n\t\t\t * the call is coalesced into the pending update. The call to\n\t\t\t * localStorage.setItem will be naturally deferred until the page is quiescent.\n\t\t\t *\n\t\t\t * Because localStorage is shared by all pages from the same origin, if multiple\n\t\t\t * pages are loaded with different module sets, the possibility exists that\n\t\t\t * modules saved by one page will be clobbered by another. But the impact would\n\t\t\t * be minor and the problem would be corrected by subsequent page views.\n\t\t\t *\n\t\t\t * @method\n\t\t\t */\n\t\t\tupdate: ( function () {\n\t\t\t\tvar hasPendingWrite = false;\n\n\t\t\t\tfunction flushWrites() {\n\t\t\t\t\tvar data, key;\n\t\t\t\t\tif ( !hasPendingWrite || !rlLoader.store.enabled ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\trlLoader.store.prune();\n\t\t\t\t\tkey = rlLoader.store.getStoreKey();\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// Replacing the content of the module store might fail if the new\n\t\t\t\t\t\t// contents would exceed the browser's localStorage size limit. To\n\t\t\t\t\t\t// avoid clogging the browser with stale data, always remove the old\n\t\t\t\t\t\t// value before attempting to set the new one.\n\t\t\t\t\t\tlocalStorage.removeItem( key );\n\t\t\t\t\t\tdata = JSON.stringify( rlLoader.store );\n\t\t\t\t\t\tlocalStorage.setItem( key, data );\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\ttrack( 'resourceloader.exception', { exception: e, source: 'store-localstorage-update' } );\n\t\t\t\t\t}\n\n\t\t\t\t\thasPendingWrite = false;\n\t\t\t\t}\n\n\t\t\t\treturn function () {\n\t\t\t\t\tif ( !hasPendingWrite ) {\n\t\t\t\t\t\thasPendingWrite = true;\n\t\t\t\t\t\trequestIdleCallback( flushWrites );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}() )\n\t\t}\n\t};\n}() );\n\nmodule.exports = rlLoader;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/mediawiki/loader.js\n// module id = 7\n// module chunks = 0","var log = require( './log' ),\n\thasOwn = Object.prototype.hasOwnProperty,\n\tmw = require( './mediawiki' ),\n\tslice = Array.prototype.slice;\n\n/**\n * Alias property to the global object.\n *\n * @private\n * @static\n * @param {mw.Map} map\n * @param {string} key\n * @param {Mixed} value\n */\nfunction setGlobalMapValue( map, key, value ) {\n\tmap.internalValues[ key ] = value;\n\tlog.deprecate(\n\t\t\twindow,\n\t\t\tkey,\n\t\t\tvalue,\n\t\t\t// Deprecation notice for mw.config globals (T58550, T72470)\n\t\t\tmap === mw.config && 'Use mw.config instead.'\n\t);\n}\n\n/**\n * Create an object that can be read from or written to via methods that allow\n * interaction both with single and multiple properties at once.\n *\n * @private\n * @class mw.Map\n *\n * @constructor\n * @param {boolean} [global=false] Whether to synchronise =values to the global\n *  window object (for backwards-compatibility with mw.config; T72470). Values are\n *  copied in one direction only. Changes to globals do not reflect in the map.\n */\nfunction Map( global ) {\n\tthis.internalValues = {};\n\tif ( global === true ) {\n\t\t// Override #set to also set the global variable\n\t\tthis.set = function ( selection, value ) {\n\t\t\tvar s;\n\n\t\t\tif ( $.isPlainObject( selection ) ) {\n\t\t\t\tfor ( s in selection ) {\n\t\t\t\t\tsetGlobalMapValue( this, s, selection[ s ] );\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif ( typeof selection === 'string' && arguments.length ) {\n\t\t\t\tsetGlobalMapValue( this, selection, value );\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t}\n\n\t// Deprecated since MediaWiki 1.28\n\tlog.deprecate(\n\t\tthis,\n\t\t'values',\n\t\tthis.internalValues,\n\t\t'mw.Map#values is deprecated. Use mw.Map#get() instead.',\n\t\t'Map-values'\n\t);\n}\n\nMap.prototype = {\n\tconstructor: Map,\n\n\t/**\n\t * Get the value of one or more keys.\n\t *\n\t * If called with no arguments, all values are returned.\n\t *\n\t * @param {string|Array} [selection] Key or array of keys to retrieve values for.\n\t * @param {Mixed} [fallback=null] Value for keys that don't exist.\n\t * @return {Mixed|Object| null} If selection was a string, returns the value,\n\t *  If selection was an array, returns an object of key/values.\n\t *  If no selection is passed, the internal container is returned. (Beware that,\n\t *  as is the default in JavaScript, the object is returned by reference.)\n\t */\n\tget: function ( selection, fallback ) {\n\t\tvar results, i;\n\t\t// If we only do this in the `return` block, it'll fail for the\n\t\t// call to get() from the mutli-selection block.\n\t\tfallback = arguments.length > 1 ? fallback : null;\n\n\t\tif ( $.isArray( selection ) ) {\n\t\t\tselection = slice.call( selection );\n\t\t\tresults = {};\n\t\t\tfor ( i = 0; i < selection.length; i++ ) {\n\t\t\t\tresults[ selection[ i ] ] = this.get( selection[ i ], fallback );\n\t\t\t}\n\t\t\treturn results;\n\t\t}\n\n\t\tif ( typeof selection === 'string' ) {\n\t\t\tif ( !hasOwn.call( this.internalValues, selection ) ) {\n\t\t\t\treturn fallback;\n\t\t\t}\n\t\t\treturn this.internalValues[ selection ];\n\t\t}\n\n\t\tif ( selection === undefined ) {\n\t\t\treturn this.internalValues;\n\t\t}\n\n\t\t// Invalid selection key\n\t\treturn null;\n\t},\n\n\t/**\n\t * Set one or more key/value pairs.\n\t *\n\t * @param {string|Object} selection Key to set value for, or object mapping keys to values\n\t * @param {Mixed} [value] Value to set (optional, only in use when key is a string)\n\t * @return {boolean} True on success, false on failure\n\t */\n\tset: function ( selection, value ) {\n\t\tvar s;\n\n\t\tif ( $.isPlainObject( selection ) ) {\n\t\t\tfor ( s in selection ) {\n\t\t\t\tthis.internalValues[ s ] = selection[ s ];\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\tif ( typeof selection === 'string' && arguments.length > 1 ) {\n\t\t\tthis.internalValues[ selection ] = value;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n\n\t/**\n\t * Check if one or more keys exist.\n\t *\n\t * @param {Mixed} selection Key or array of keys to check\n\t * @return {boolean} True if the key(s) exist\n\t */\n\texists: function ( selection ) {\n\t\tvar s;\n\n\t\tif ( $.isArray( selection ) ) {\n\t\t\tfor ( s = 0; s < selection.length; s++ ) {\n\t\t\t\tif ( typeof selection[ s ] !== 'string' || !hasOwn.call( this.internalValues, selection[ s ] ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn typeof selection === 'string' && hasOwn.call( this.internalValues, selection );\n\t}\n};\n\nmodule.exports = Map;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/mediawiki/Map.js\n// module id = 8\n// module chunks = 0","var format = require( './format' ),\n\thtml = require( './html' ),\n\tslice = Array.prototype.slice;\n\n/**\n * Object constructor for messages.\n *\n * Similar to the Message class in MediaWiki PHP.\n *\n * Format defaults to 'text'.\n *\n *     @example\n *\n *     var obj, str;\n *     mw.messages.set( {\n *         'hello': 'Hello world',\n *         'hello-user': 'Hello, $1!',\n *         'welcome-user': 'Welcome back to $2, $1! Last visit by $1: $3'\n *     } );\n *\n *     obj = new mw.Message( mw.messages, 'hello' );\n *     mw.log( obj.text() );\n *     // Hello world\n *\n *     obj = new mw.Message( mw.messages, 'hello-user', [ 'John Doe' ] );\n *     mw.log( obj.text() );\n *     // Hello, John Doe!\n *\n *     obj = new mw.Message( mw.messages, 'welcome-user', [ 'John Doe', 'Wikipedia', '2 hours ago' ] );\n *     mw.log( obj.text() );\n *     // Welcome back to Wikipedia, John Doe! Last visit by John Doe: 2 hours ago\n *\n *     // Using mw.message shortcut\n *     obj = mw.message( 'hello-user', 'John Doe' );\n *     mw.log( obj.text() );\n *     // Hello, John Doe!\n *\n *     // Using mw.msg shortcut\n *     str = mw.msg( 'hello-user', 'John Doe' );\n *     mw.log( str );\n *     // Hello, John Doe!\n *\n *     // Different formats\n *     obj = new mw.Message( mw.messages, 'hello-user', [ 'John \"Wiki\" <3 Doe' ] );\n *\n *     obj.format = 'text';\n *     str = obj.toString();\n *     // Same as:\n *     str = obj.text();\n *\n *     mw.log( str );\n *     // Hello, John \"Wiki\" <3 Doe!\n *\n *     mw.log( obj.escaped() );\n *     // Hello, John &quot;Wiki&quot; &lt;3 Doe!\n *\n * @class mw.Message\n *\n * @constructor\n * @param {mw.Map} map Message store\n * @param {string} key\n * @param {Array} [parameters]\n */\nfunction Message( map, key, parameters ) {\n\tthis.format = 'text';\n\tthis.map = map;\n\tthis.key = key;\n\tthis.parameters = parameters === undefined ? [] : slice.call( parameters );\n\treturn this;\n}\n\nMessage.prototype = {\n\t/**\n\t * Get parsed contents of the message.\n\t *\n\t * The default parser does simple $N replacements and nothing else.\n\t * This may be overridden to provide a more complex message parser.\n\t * The primary override is in the mediawiki.jqueryMsg module.\n\t *\n\t * This function will not be called for nonexistent messages.\n\t *\n\t * @return {string} Parsed message\n\t */\n\tparser: function () {\n\t\treturn format.apply( null, [ this.map.get( this.key ) ].concat( this.parameters ) );\n\t},\n\n\t// eslint-disable-next-line valid-jsdoc\n\t/**\n\t * Add (does not replace) parameters for `$N` placeholder values.\n\t *\n\t * @param {Array} parameters\n\t * @chainable\n\t */\n\tparams: function ( parameters ) {\n\t\tvar i;\n\t\tfor ( i = 0; i < parameters.length; i++ ) {\n\t\t\tthis.parameters.push( parameters[ i ] );\n\t\t}\n\t\treturn this;\n\t},\n\n\t/**\n\t * Convert message object to its string form based on current format.\n\t *\n\t * @return {string} Message as a string in the current form, or `<key>` if key\n\t *  does not exist.\n\t */\n\ttoString: function () {\n\t\tvar text;\n\n\t\tif ( !this.exists() ) {\n\t\t\t// Use ⧼key⧽ as text if key does not exist\n\t\t\t// Err on the side of safety, ensure that the output\n\t\t\t// is always html safe in the event the message key is\n\t\t\t// missing, since in that case its highly likely the\n\t\t\t// message key is user-controlled.\n\t\t\t// '⧼' is used instead of '<' to side-step any\n\t\t\t// double-escaping issues.\n\t\t\t// (Keep synchronised with Message::toString() in PHP.)\n\t\t\treturn '⧼' + html.escape( this.key ) + '⧽';\n\t\t}\n\n\t\tif ( this.format === 'plain' || this.format === 'text' || this.format === 'parse' ) {\n\t\t\ttext = this.parser();\n\t\t}\n\n\t\tif ( this.format === 'escaped' ) {\n\t\t\ttext = this.parser();\n\t\t\ttext = html.escape( text );\n\t\t}\n\n\t\treturn text;\n\t},\n\n\t/**\n\t * Change format to 'parse' and convert message to string\n\t *\n\t * If jqueryMsg is loaded, this parses the message text from wikitext\n\t * (where supported) to HTML\n\t *\n\t * Otherwise, it is equivalent to plain.\n\t *\n\t * @return {string} String form of parsed message\n\t */\n\tparse: function () {\n\t\tthis.format = 'parse';\n\t\treturn this.toString();\n\t},\n\n\t/**\n\t * Change format to 'plain' and convert message to string\n\t *\n\t * This substitutes parameters, but otherwise does not change the\n\t * message text.\n\t *\n\t * @return {string} String form of plain message\n\t */\n\tplain: function () {\n\t\tthis.format = 'plain';\n\t\treturn this.toString();\n\t},\n\n\t/**\n\t * Change format to 'text' and convert message to string\n\t *\n\t * If jqueryMsg is loaded, {{-transformation is done where supported\n\t * (such as {{plural:}}, {{gender:}}, {{int:}}).\n\t *\n\t * Otherwise, it is equivalent to plain\n\t *\n\t * @return {string} String form of text message\n\t */\n\ttext: function () {\n\t\tthis.format = 'text';\n\t\treturn this.toString();\n\t},\n\n\t/**\n\t * Change the format to 'escaped' and convert message to string\n\t *\n\t * This is equivalent to using the 'text' format (see #text), then\n\t * HTML-escaping the output.\n\t *\n\t * @return {string} String form of html escaped message\n\t */\n\tescaped: function () {\n\t\tthis.format = 'escaped';\n\t\treturn this.toString();\n\t},\n\n\t/**\n\t * Check if a message exists\n\t *\n\t * @see mw.Map#exists\n\t * @return {boolean}\n\t */\n\texists: function () {\n\t\treturn this.map.exists( this.key );\n\t}\n};\n\nmodule.exports = Message;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/mediawiki/Message.js\n// module id = 9\n// module chunks = 0","/**\n * Try to catch errors in modules which don't do their own error handling.\n *\n * @class mw.errorLogger\n * @singleton\n */\n'use strict';\n\nvar errorLogger,\n\tmw = require( './mediawiki' );\n\nerrorLogger = {\n\t/**\n\t * Fired via mw.track when an error is not handled by local code and is caught by the\n\t * window.onerror handler.\n\t *\n\t * @event global_error\n\t * @param {string} errorMessage Error errorMessage.\n\t * @param {string} url URL where error was raised.\n\t * @param {number} lineNumber Line number where error was raised.\n\t * @param {number} [columnNumber] Line number where error was raised. Not all browsers\n\t *   support this.\n\t * @param {Error|Mixed} [errorObject] The error object. Typically an instance of Error, but anything\n\t *   (even a primitive value) passed to a throw clause will end up here.\n\t */\n\n\t/**\n\t * Install a window.onerror handler that will report via mw.track, while preserving\n\t * any previous handler.\n\t *\n\t * @param {Object} window\n\t */\n\tinstallGlobalHandler: function ( window ) {\n\t\t// We will preserve the return value of the previous handler. window.onerror works the\n\t\t// opposite way than normal event handlers (returning true will prevent the default\n\t\t// action, returning false will let the browser handle the error normally, by e.g.\n\t\t// logging to the console), so our fallback old handler needs to return false.\n\t\tvar oldHandler = window.onerror || function () { return false; };\n\n\t\t/**\n\t\t * Dumb window.onerror handler which forwards the errors via mw.track.\n\t\t *\n\t\t * @param {string} errorMessage\n\t\t * @param {string} url\n\t\t * @param {number} lineNumber\n\t\t * @param {number} [columnNumber]\n\t\t * @param {Error|Mixed} [errorObject]\n\t\t * @return {boolean} True to prevent the default action\n\t\t * @fires global_error\n\t\t */\n\t\twindow.onerror = function ( errorMessage, url, lineNumber, columnNumber, errorObject ) {\n\t\t\tmw.track( 'global.error', { errorMessage: errorMessage, url: url,\n\t\t\t\tlineNumber: lineNumber, columnNumber: columnNumber, errorObject: errorObject } );\n\t\t\treturn oldHandler.apply( this, arguments );\n\t\t};\n\t}\n};\n\nmodule.exports = errorLogger;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/mediawiki/errorLogger.js\n// module id = 10\n// module chunks = 0","/**\n * FNV132 hash function\n *\n * This function implements the 32-bit version of FNV-1.\n * It is equivalent to hash( 'fnv132', ... ) in PHP, except\n * its output is base 36 rather than hex.\n * See <https://en.wikipedia.org/wiki/FNV_hash_function>\n *\n * @private\n * @param {string} str String to hash\n * @return {string} hash as an seven-character base 36 string\n */\nfunction fnv132( str ) {\n\t/* eslint-disable no-bitwise */\n\tvar hash = 0x811C9DC5,\n\t\ti;\n\n\tfor ( i = 0; i < str.length; i++ ) {\n\t\thash += ( hash << 1 ) + ( hash << 4 ) + ( hash << 7 ) + ( hash << 8 ) + ( hash << 24 );\n\t\thash ^= str.charCodeAt( i );\n\t}\n\n\thash = ( hash >>> 0 ).toString( 36 );\n\twhile ( hash.length < 7 ) {\n\t\thash = '0' + hash;\n\t}\n\n\treturn hash;\n\t/* eslint-enable no-bitwise */\n}\n\nmodule.exports = fnv132;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/mediawiki/fnv132.js\n// module id = 11\n// module chunks = 0","var hasOwn = Object.prototype.hasOwnProperty,\n\tslice = Array.prototype.slice;\n\nmodule.exports = ( function () {\n\tvar lists = {};\n\n\t/**\n\t * Create an instance of mw.hook.\n\t *\n\t * @method hook\n\t * @member mw\n\t * @param {string} name Name of hook.\n\t * @return {mw.hook}\n\t */\n\treturn function ( name ) {\n\t\tvar list = hasOwn.call( lists, name ) ?\n\t\t\tlists[ name ] :\n\t\t\tlists[ name ] = $.Callbacks( 'memory' );\n\n\t\treturn {\n\t\t\t/**\n\t\t\t * Register a hook handler\n\t\t\t *\n\t\t\t * @param {...Function} handler Function to bind.\n\t\t\t * @chainable\n\t\t\t */\n\t\t\tadd: list.add,\n\n\t\t\t/**\n\t\t\t * Unregister a hook handler\n\t\t\t *\n\t\t\t * @param {...Function} handler Function to unbind.\n\t\t\t * @chainable\n\t\t\t */\n\t\t\tremove: list.remove,\n\n\t\t\t// eslint-disable-next-line valid-jsdoc\n\t\t\t/**\n\t\t\t * Run a hook.\n\t\t\t *\n\t\t\t * @param {...Mixed} data\n\t\t\t * @chainable\n\t\t\t */\n\t\t\tfire: function () {\n\t\t\t\treturn list.fireWith.call( this, null, slice.call( arguments ) );\n\t\t\t}\n\t\t};\n\t};\n}() );\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/mediawiki/hook.js\n// module id = 12\n// module chunks = 0","var requestIdleCallbackInternal,\n\tmaxBusy = 50,\n\tnow = require( './now' );\n\nrequestIdleCallbackInternal = function ( callback ) {\n\tsetTimeout( function () {\n\t\tvar start = now();\n\t\tcallback( {\n\t\t\tdidTimeout: false,\n\t\t\ttimeRemaining: function () {\n\t\t\t\treturn Math.max( 0, maxBusy - ( now() - start ) );\n\t\t\t}\n\t\t} );\n\t}, 1 );\n};\n\n/**\n * Schedule a deferred task to run in the background.\n *\n * This allows code to perform tasks in the main thread without impacting\n * time-critical operations such as animations and response to input events.\n *\n * Basic logic is as follows:\n *\n * - User input event should be acknowledged within 100ms per [RAIL].\n * - Idle work should be grouped in blocks of upto 50ms so that enough time\n *   remains for the event handler to execute and any rendering to take place.\n * - Whenever a native event happens (e.g. user input), the deadline for any\n *   running idle callback drops to 0.\n * - As long as the deadline is non-zero, other callbacks pending may be\n *   executed in the same idle period.\n *\n * See also:\n *\n * - <https://developer.mozilla.org/en-US/docs/Web/API/Window/requestIdleCallback>\n * - <https://w3c.github.io/requestidlecallback/>\n * - <https://developers.google.com/web/updates/2015/08/using-requestidlecallback>\n * [RAIL]: https://developers.google.com/web/fundamentals/performance/rail\n *\n * @member mw\n * @param {Function} callback\n * @param {Object} [options]\n * @param {number} [options.timeout] If set, the callback will be scheduled for\n *  immediate execution after this amount of time (in milliseconds) if it didn't run\n *  by that time.\n */\nmodule.exports = requestIdleCallbackInternal;\n/*\n// XXX: Polyfill disabled due to https://bugs.chromium.org/p/chromium/issues/detail?id=647870\nmw.requestIdleCallback = window.requestIdleCallback\n\t// Bind because it throws TypeError if context is not window\n\t? window.requestIdleCallback.bind( window )\n\t: mw.requestIdleCallbackInternal;\n*/\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/mediawiki/requestIdleCallbackInternal.js\n// module id = 13\n// module chunks = 0","/**\n * Base library for MediaWiki.\n *\n * Exposed globally as `mediaWiki` with `mw` as shortcut.\n *\n * @class mw\n * @alternateClassName mediaWiki\n * @singleton\n */\n\n( function ( $ ) {\n\t'use strict';\n\n\tvar mw = require( './mediawiki' ),\n\t\tloader = require( './loader' );\n\n\t/* eslint-enable no-console */\n\n\t// Alias $j to jQuery for backwards compatibility\n\t// @deprecated since 1.23 Use $ or jQuery instead\n\tmw.log.deprecate( window, '$j', $, 'Use $ or jQuery instead.' );\n\n\t/**\n\t * Log a message to window.console, if possible.\n\t *\n\t * Useful to force logging of some errors that are otherwise hard to detect (i.e., this logs\n\t * also in production mode). Gets console references in each invocation instead of caching the\n\t * reference, so that debugging tools loaded later are supported (e.g. Firebug Lite in IE).\n\t *\n\t * @private\n\t * @param {string} topic Stream name passed by mw.track\n\t * @param {Object} data Data passed by mw.track\n\t * @param {Error} [data.exception]\n\t * @param {string} data.source Error source\n\t * @param {string} [data.module] Name of module which caused the error\n\t */\n\tfunction logError( topic, data ) {\n\t\t/* eslint-disable no-console */\n\t\tvar msg,\n\t\t\te = data.exception,\n\t\t\tsource = data.source,\n\t\t\tmodule = data.module,\n\t\t\tconsole = window.console;\n\n\t\tif ( console && console.log ) {\n\t\t\tmsg = ( e ? 'Exception' : 'Error' ) + ' in ' + source;\n\t\t\tif ( module ) {\n\t\t\t\tmsg += ' in module ' + module;\n\t\t\t}\n\t\t\tmsg += ( e ? ':' : '.' );\n\t\t\tconsole.log( msg );\n\n\t\t\t// If we have an exception object, log it to the error channel to trigger\n\t\t\t// proper stacktraces in browsers that support it. No fallback as we have\n\t\t\t// no browsers that don't support error(), but do support log().\n\t\t\tif ( e && console.error ) {\n\t\t\t\tconsole.error( String( e ), e );\n\t\t\t}\n\t\t}\n\t\t/* eslint-enable no-console */\n\t}\n\n\t// Subscribe to error streams\n\tmw.trackSubscribe( 'resourceloader.exception', logError );\n\tmw.trackSubscribe( 'resourceloader.assert', logError );\n\n\t/**\n\t * Fired when all modules associated with the page have finished loading.\n\t *\n\t * @event resourceloader_loadEnd\n\t * @member mw.hook\n\t */\n\t$( function () {\n\t\tvar loading = $.grep( mw.loader.getModuleNames(), function ( module ) {\n\t\t\treturn mw.loader.getState( module ) === 'loading';\n\t\t} );\n\t\t// We only need a callback, not any actual module. First try a single using()\n\t\t// for all loading modules. If one fails, fall back to tracking each module\n\t\t// separately via $.when(), this is expensive.\n\t\tloading = mw.loader.using( loading ).then( null, function () {\n\t\t\tvar all = $.map( loading, function ( module ) {\n\t\t\t\treturn mw.loader.using( module ).then( null, function () {\n\t\t\t\t\treturn $.Deferred().resolve();\n\t\t\t\t} );\n\t\t\t} );\n\t\t\treturn $.when.apply( $, all );\n\t\t} );\n\t\tloading.then( function () {\n\t\t\tmwPerformance.mark( 'mwLoadEnd' );\n\t\t\tmw.hook( 'resourceloader.loadEnd' ).fire();\n\t\t} );\n\t} );\n\n\tmw.loader = loader;\n\tmw.errorLogger.installGlobalHandler( window );\n\t// Attach to window and globally alias\n\twindow.mw = window.mediaWiki = mw;\n}( jQuery ) );\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./build/mediawiki/index.js\n// module id = 14\n// module chunks = 0"],"sourceRoot":""}