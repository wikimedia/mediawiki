/* stylelint-disable no-duplicate-selectors */
@import 'mediawiki.widgets.datetime.definitions';

.mw-widgets-datetime-dateTimeInputWidget {
	display: inline-block;
	position: relative;
	width: 100%;
	max-width: 50em;
	margin: 0.25em 0;
	.oo-ui-inline-spacing( 0.5em );
	vertical-align: middle;

	&-fields {
		position: relative;
		display: table;
		z-index: 2;
		.oo-ui-unselectable();

		> .mw-widgets-datetime-dateTimeInputWidget-field {
			.oo-ui-box-sizing( border-box );
			display: table-cell;
			white-space: pre;
		}
	}

	&-handle {
		background-color: @background-color-base;
		color: @color-base;
		display: inline-block;
		.oo-ui-box-sizing( border-box );
		width: 100%;
		height: 2.5em;
		margin: 0;
		border: @border-base;
		border-radius: @border-radius-base;
		padding: 0 1em;
		box-shadow: inset 0 0 0 0 @color-progressive;
		// Needed for proper behavior with `overflow: hidden`.
		vertical-align: bottom;
		overflow: hidden;
		.oo-ui-unselectable();
		.oo-ui-transition( box-shadow @transition-ease-quick );

		> .oo-ui-indicatorElement-indicator,
		> .oo-ui-iconElement-icon {
			position: absolute;
			background-position: center center;
			background-repeat: no-repeat;
			z-index: 1;
		}

		> .oo-ui-iconElement-icon {
			top: 0;
			left: 0.25em;
			width: @size-icon;
			height: @size-icon;
			margin: 0.3em;
		}

		> .oo-ui-indicatorElement-indicator {
			top: 0;
			right: 0;
			width: @size-indicator;
			height: @size-indicator;
			margin: 0.775em;
		}
	}

	&-empty &-handle {
		color: @color-base--subtle;
	}

	&-field {
		background-color: transparent;
		color: inherit;
		.oo-ui-box-sizing( border-box );
		margin: 0;
		border: 0;
		border-radius: @border-radius-base;
		padding: 0;
		box-shadow: none;
		font-size: inherit;
		font-family: inherit;
		text-align: center;
		vertical-align: middle;
	}

	input.mw-widgets-datetime-dateTimeInputWidget-field {
		padding: 0.5em 0;
		line-height: 1.6; // repeat `.mw-body-content`'s `line-height` for now
	}

	&-editField.mw-widgets-datetime-dateTimeInputWidget-invalid {
		border: 1px solid @border-color-erroneous;
		box-shadow: @box-shadow-widget;

		&:focus {
			border: 1px solid @border-color-erroneous;
			box-shadow: @box-shadow-erroneous--focus;
		}
	}

	&.oo-ui-iconElement .mw-widgets-datetime-dateTimeInputWidget-handle {
		padding-left: 3em;
	}

	&.oo-ui-indicatorElement .mw-widgets-datetime-dateTimeInputWidget-handle {
		padding-right: 2em;
	}

	&.oo-ui-widget-enabled {
		.mw-widgets-datetime-dateTimeInputWidget-editField:hover {
			background-color: @background-color-base--hover;
		}

		&.oo-ui-flaggedElement-invalid {
			.mw-widgets-datetime-dateTimeInputWidget-handle {
				border-color: @border-color-erroneous;
				box-shadow: @box-shadow-widget;
			}

			.mw-widgets-datetime-dateTimeInputWidget-handle:focus {
				border-color: @border-color-erroneous;
				box-shadow: @box-shadow-erroneous--focus;
			}
		}

		input.mw-widgets-datetime-dateTimeInputWidget-field:focus {
			outline: 0;
			box-shadow: 0 0 0 2px @color-progressive;
		}
	}

	&.oo-ui-widget-disabled {
		.mw-widgets-datetime-dateTimeInputWidget-handle {
			background-color: @background-color-base--disabled;
			// Support: Safari
			-webkit-text-fill-color: @color-base--disabled;
			color: @color-base--disabled;
			text-shadow: @text-shadow-base--disabled;
			border-color: @border-color-base--disabled;
		}

		> .oo-ui-iconElement-icon,
		> .oo-ui-indicatorElement-indicator {
			opacity: @opacity-base--disabled;
		}
	}
}
